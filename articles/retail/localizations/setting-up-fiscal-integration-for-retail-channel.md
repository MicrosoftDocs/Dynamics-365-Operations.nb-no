---
title: Definere økonomisk integrering for detaljhandelskanaler
description: Dette emnet gir retningslinjer for hvordan du konfigurerer regnskapsintegreringsfunksjonaliteten for detaljhandelskanaler.
author: josaw
manager: annbe
ms.date: 02/01/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailFunctionalityProfile, RetailFormLayout, RetailParameters
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: Global
ms.search.industry: Retail
ms.author: v-kikozl
ms.search.validFrom: 2018-11-1
ms.dyn365.ops.version: 8.1.1
ms.openlocfilehash: 685340141ed35f4a2b57742328c69d3bbf9a73d2
ms.sourcegitcommit: 70aeb93612ccd45ee88c605a1a4b87c469e3ff57
ms.translationtype: HT
ms.contentlocale: nb-NO
ms.lasthandoff: 03/01/2019
ms.locfileid: "773333"
---
# <a name="set-up-the-fiscal-integration-for-retail-channels"></a><span data-ttu-id="4e682-103">Definere økonomisk integrering for detaljhandelskanaler</span><span class="sxs-lookup"><span data-stu-id="4e682-103">Set up the fiscal integration for Retail channels</span></span>

[!include [banner](../includes/banner.md)]

## <a name="introduction"></a><span data-ttu-id="4e682-104">Innledning</span><span class="sxs-lookup"><span data-stu-id="4e682-104">Introduction</span></span>

<span data-ttu-id="4e682-105">Dette emnet gir retningslinjer for hvordan du konfigurerer regnskapsintegreringsfunksjonaliteten for detaljhandelskanaler.</span><span class="sxs-lookup"><span data-stu-id="4e682-105">This topic provides guidelines for setting up the fiscal integration functionality for Retail channels.</span></span> <span data-ttu-id="4e682-106">Hvis du vil ha mer informasjon om regnskapsintegrering, kan du se [Oversikt over regnskapsintegrering for detaljhandelskanaler](fiscal-integration-for-retail-channel.md).</span><span class="sxs-lookup"><span data-stu-id="4e682-106">For more information about the fiscal integration, see [Overview of fiscal integration for Retail channels](fiscal-integration-for-retail-channel.md).</span></span>

<span data-ttu-id="4e682-107">Fremgangsmåten for å definere regnskapsintegreringen omfatter følgende hovedoppgaver:</span><span class="sxs-lookup"><span data-stu-id="4e682-107">The process of setting up the fiscal integration includes the following tasks:</span></span>

1. <span data-ttu-id="4e682-108">Konfigurer regnskapskoblinger som representerer regnskapsenheter eller -tjenester som brukes til regnskapsregistreringformål, for eksempel regnskapsskrivere.</span><span class="sxs-lookup"><span data-stu-id="4e682-108">Configure fiscal connectors that represent fiscal devices or services that are used for fiscal registration purposes, such as fiscal printers.</span></span>
2. <span data-ttu-id="4e682-109">Konfigurer dokumentleverandører som genererer regnskapsdokumenter som skal registreres i regnskapsenheter eller -tjenester av regnskapskoblinger.</span><span class="sxs-lookup"><span data-stu-id="4e682-109">Configure document providers that generate fiscal documents that will be registered in fiscal devices or services by fiscal connectors.</span></span>
3. <span data-ttu-id="4e682-110">Konfigurer regnskapsregistreringsprosessen som definerer en sekvens med bilagsregistreringstrinn og regnskapskoblingene og leverandørene av regnskapsdokument som skal brukes for hvert trinn.</span><span class="sxs-lookup"><span data-stu-id="4e682-110">Configure the fiscal registration process that defines a sequence of fiscal registration steps and the fiscal connectors and fiscal document providers that are used for each step.</span></span>
4. <span data-ttu-id="4e682-111">Tilordne bilagsregistreringsprosessen til funksjonalitetsprofiler for salgssted (POS).</span><span class="sxs-lookup"><span data-stu-id="4e682-111">Assign the fiscal registration process to point of sale (POS) functionality profiles.</span></span>
5. <span data-ttu-id="4e682-112">Tilordne tekniske profiler for kobling til maskinvareprofiler.</span><span class="sxs-lookup"><span data-stu-id="4e682-112">Assign connector technical profiles to hardware profiles.</span></span>

## <a name="set-up-a-fiscal-registration-process"></a><span data-ttu-id="4e682-113">Definere en bilagsregistreringsprosess</span><span class="sxs-lookup"><span data-stu-id="4e682-113">Set up a fiscal registration process</span></span>

<span data-ttu-id="4e682-114">Før du bruker regnskapsintegreringsfunksjonaliteten, bør du konfigurere følgende innstillinger:</span><span class="sxs-lookup"><span data-stu-id="4e682-114">Before you use the fiscal integration functionality, you should configure the following settings.</span></span>

1. <span data-ttu-id="4e682-115">Oppdater detaljhandelsparametere.</span><span class="sxs-lookup"><span data-stu-id="4e682-115">Update retail parameters.</span></span>

    1. <span data-ttu-id="4e682-116">På **Delte parametere for detaljhandel**-siden, i **Generelt**-fanen angi **Aktiver regnskapsintegrering** til **Ja**.</span><span class="sxs-lookup"><span data-stu-id="4e682-116">On the **Retail shared parameters** page, on the **General** tab, set the **Enable fiscal integration** option to **Yes**.</span></span> <span data-ttu-id="4e682-117">I kategorien **Nummerserier** definerer du nummersekvenser for følgende referanser:</span><span class="sxs-lookup"><span data-stu-id="4e682-117">On the **Number sequences** tab, define the number sequences for the following references:</span></span>

        - <span data-ttu-id="4e682-118">Nummer for teknisk profil for regnskap</span><span class="sxs-lookup"><span data-stu-id="4e682-118">Fiscal technical profile number</span></span>
        - <span data-ttu-id="4e682-119">Gruppenummer for regnskapskobling</span><span class="sxs-lookup"><span data-stu-id="4e682-119">Fiscal connector group number</span></span>
        - <span data-ttu-id="4e682-120">Nummer for registreringsprosess</span><span class="sxs-lookup"><span data-stu-id="4e682-120">Registration process number</span></span>

    2. <span data-ttu-id="4e682-121">På **Detaljhandelsparametere**-siden definer nummersekvensen for nummer for funksjonell profil for regnskap.</span><span class="sxs-lookup"><span data-stu-id="4e682-121">On the **Retail parameters** page, define the number sequence for the fiscal functional profile number.</span></span>

    > [!NOTE]
    > <span data-ttu-id="4e682-122">Nummerserier er valgfrie.</span><span class="sxs-lookup"><span data-stu-id="4e682-122">Number sequences are optional.</span></span> <span data-ttu-id="4e682-123">Numre for alle regnskapsintegrasjonsenheter kan genereres fra nummerserier eller manuelt.</span><span class="sxs-lookup"><span data-stu-id="4e682-123">Numbers for all fiscal integration entities can be generated either from number sequences or manually.</span></span>

2. <span data-ttu-id="4e682-124">Last opp konfigurasjoner av regnskapskoblinger og leverandører av regnskapsdokument.</span><span class="sxs-lookup"><span data-stu-id="4e682-124">Upload configurations of fiscal connectors and fiscal document providers.</span></span>

    <span data-ttu-id="4e682-125">En leverandør for regnskapsdokumentet er ansvarlig for å generere regnskapsdokumenter som representerer detaljhandelstransaksjoner og hendelser som er registrert på salgsstedet i et format som også brukes for samhandlingen med en regnskapsenhet eller -tjeneste.</span><span class="sxs-lookup"><span data-stu-id="4e682-125">A fiscal document provider is responsible for generating fiscal documents that represent retail transactions and events that are registered on the POS in a format that is also used for the interaction with a fiscal device or service.</span></span> <span data-ttu-id="4e682-126">For eksempel kan en regnskapsdokumentleverandør generere en representasjon av en bilagskvittering i XML-format.</span><span class="sxs-lookup"><span data-stu-id="4e682-126">For example, a fiscal document provider might generate a representation of a fiscal receipt in an XML format.</span></span>
    
    <span data-ttu-id="4e682-127">En regnskapskobling er ansvarlig for kommunikasjonen med en regnskapsenhet eller -tjeneste.</span><span class="sxs-lookup"><span data-stu-id="4e682-127">A fiscal connector is responsible for the communication with a fiscal device or service.</span></span> <span data-ttu-id="4e682-128">En regnskapskobling kan for eksempel sende en bilagskvittering som en regnskapsdokumentleverandør opprettet i et XML-format til en bilagsskriver.</span><span class="sxs-lookup"><span data-stu-id="4e682-128">For example, a fiscal connector might send a fiscal receipt that a fiscal document provider created in an XML format to a fiscal printer.</span></span> <span data-ttu-id="4e682-129">Hvis du vil ha mer informasjon om regnskapsintegreringskomponentene, se [Bilagsregistreringsprosess og regnskapsintegreringeseksempler for regnskapsenheter](fiscal-integration-for-retail-channel.md#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices).</span><span class="sxs-lookup"><span data-stu-id="4e682-129">For more details about fiscal integration components, see [Fiscal registration process and fiscal integration samples for fiscal devices](fiscal-integration-for-retail-channel.md#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices).</span></span>

    1. <span data-ttu-id="4e682-130">På siden **Regnskapskoblinger** (**Detaljhandel \> Kanaloppsett \> Regnskapsintegrering \> Regnskapskoblinger**) laster du opp en XML-konfigurasjon for hver enhet eller tjeneste du planlegger å bruke for regnskapsintegreringsformål.</span><span class="sxs-lookup"><span data-stu-id="4e682-130">On the **Fiscal connectors** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal connectors**), upload an XML configuration for each device or service that you plan to use for fiscal integration purposes.</span></span>

        > [!TIP]
        > <span data-ttu-id="4e682-131">Ved å velge **Vis** kan du vise alle funksjonelle og tekniske profiler som er knyttet til gjeldende regnskapskobling.</span><span class="sxs-lookup"><span data-stu-id="4e682-131">By selecting **View**, you can view all functional and technical profiles that are related to the current fiscal connector.</span></span>

    2. <span data-ttu-id="4e682-132">På siden **Leverandører for regnskapsdokument** (**Detaljhandel \> Kanaloppsett \> Regnskapsintegrering \> Leverandører for regnskapsdokument**) laster du opp en XML-konfigurasjon for hver enhet eller tjeneste du planlegger å bruke.</span><span class="sxs-lookup"><span data-stu-id="4e682-132">On the **Fiscal document providers** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal document providers**), upload an XML configuration for each device or service that you plan to use.</span></span>

        > [!TIP]
        > <span data-ttu-id="4e682-133">Ved å velge **Vis** kan du vise alle funksjonelle profiler som er knyttet til gjeldende finansdokumentleverandør.</span><span class="sxs-lookup"><span data-stu-id="4e682-133">By selecting **View**, you can view all functional profiles that are related to the current fiscal document provider.</span></span>

    <span data-ttu-id="4e682-134">For eksempler på konfigurasjoner av regnskapskoblinger og regnskapsdokumentleverandører, se [Eksempler på regnskapsintegrering i SDK for detaljhandel](fiscal-integration-for-retail-channel.md#fiscal-integration-samples-in-the-retail-sdk).</span><span class="sxs-lookup"><span data-stu-id="4e682-134">For examples of configurations of fiscal connectors and fiscal document providers, see [Fiscal integration samples in the Retail SDK](fiscal-integration-for-retail-channel.md#fiscal-integration-samples-in-the-retail-sdk).</span></span>

    > [!NOTE]
    > <span data-ttu-id="4e682-135">Datatilordning regnes som en del av en regnskapsdokumentleverandør.</span><span class="sxs-lookup"><span data-stu-id="4e682-135">Data mapping is considered part of a fiscal document provider.</span></span> <span data-ttu-id="4e682-136">Hvis du vil definere forskjellige datatilordninger for samme tilkobling (for eksempel tilstandsspesifikke reguleringer), bør du opprette forskjellige regnskapsdokumentleverandører.</span><span class="sxs-lookup"><span data-stu-id="4e682-136">To set up different data mappings for the same connector (for example, state-specific regulations), you should create different fiscal document providers.</span></span>

3. <span data-ttu-id="4e682-137">Opprett funksjonelle profiler for kobling og tekniske profiler for kobling.</span><span class="sxs-lookup"><span data-stu-id="4e682-137">Create connector functional profiles and connector technical profiles.</span></span>

    1. <span data-ttu-id="4e682-138">På siden **Funksjonelle profiler for kobling** (**Detaljhandel \> Kanaloppsett \> Regnskapsintegrering \> Funksjonelle profiler for kobling**), opprett en funksjonell profil for kobling for hver kombinasjon av regnskapskobling og finansdokumentleverandør som er knyttet til denne regnskapskoblingen.</span><span class="sxs-lookup"><span data-stu-id="4e682-138">On the **Connector functional profiles** page (**Retail \> Channel setup \> Fiscal integration \> Connector functional profiles**), create a connector functional profile for each combination of a fiscal connector and a fiscal document provider that is related to this fiscal connector.</span></span>

        1. <span data-ttu-id="4e682-139">Velg et tilkoblingsnavn.</span><span class="sxs-lookup"><span data-stu-id="4e682-139">Select a connector name.</span></span>
        2. <span data-ttu-id="4e682-140">Velg en dokumentleverandør.</span><span class="sxs-lookup"><span data-stu-id="4e682-140">Select a document provider.</span></span>

        <span data-ttu-id="4e682-141">Du kan endre datatilordningparametrene i en funksjonell profil for kobling.</span><span class="sxs-lookup"><span data-stu-id="4e682-141">You can change the data mapping parameters in a connector functional profile.</span></span> <span data-ttu-id="4e682-142">Hvis du vil gjenopprette standardparameterne som er definert i konfigurasjon av regnskapsdokumentleverandør, velger du **Oppdater**.</span><span class="sxs-lookup"><span data-stu-id="4e682-142">To restore the default parameters that are defined in the fiscal document provider configuration, select **Update**.</span></span>

        <span data-ttu-id="4e682-143">**Eksempler**</span><span class="sxs-lookup"><span data-stu-id="4e682-143">**Examples**</span></span>
    
        |   | <span data-ttu-id="4e682-144">Formater</span><span class="sxs-lookup"><span data-stu-id="4e682-144">Format</span></span> | <span data-ttu-id="4e682-145">Eksempel</span><span class="sxs-lookup"><span data-stu-id="4e682-145">Example</span></span> |
        |---|--------|---------|
        | <span data-ttu-id="4e682-146">**Mva-satsinnstillinger**</span><span class="sxs-lookup"><span data-stu-id="4e682-146">**VAT rates settings**</span></span> | <span data-ttu-id="4e682-147">verdi: VATrate</span><span class="sxs-lookup"><span data-stu-id="4e682-147">value : VATrate</span></span> | <span data-ttu-id="4e682-148">1 : 2000, 2 : 1800</span><span class="sxs-lookup"><span data-stu-id="4e682-148">1 : 2000, 2 : 1800</span></span> |
        | <span data-ttu-id="4e682-149">**Tilordning av mva-koder**</span><span class="sxs-lookup"><span data-stu-id="4e682-149">**VAT codes mapping**</span></span> | <span data-ttu-id="4e682-150">VATcode : verdi</span><span class="sxs-lookup"><span data-stu-id="4e682-150">VATcode : value</span></span> | <span data-ttu-id="4e682-151">vat20: 1, vat18: 2</span><span class="sxs-lookup"><span data-stu-id="4e682-151">vat20 : 1, vat18 : 2</span></span> |
        | <span data-ttu-id="4e682-152">**Tilordning av betalingsmiddeltyper**</span><span class="sxs-lookup"><span data-stu-id="4e682-152">**Tender types mapping**</span></span> | <span data-ttu-id="4e682-153">TenderType: verdi</span><span class="sxs-lookup"><span data-stu-id="4e682-153">TenderType : value</span></span> | <span data-ttu-id="4e682-154">Kontant: 1, kort: 2</span><span class="sxs-lookup"><span data-stu-id="4e682-154">Cash : 1, Card : 2</span></span> |

        > [!NOTE]
        > <span data-ttu-id="4e682-155">Funksjonelle profiler for kobling er firmaspesifikke.</span><span class="sxs-lookup"><span data-stu-id="4e682-155">Connector functional profiles are company-specific.</span></span> <span data-ttu-id="4e682-156">Hvis du planlegger å bruke samme kombinasjon av regnskapskobling og finansdokumentleverandør i forskjellige firmaer, bør du opprette en funksjonell profil for kobling for hvert firma.</span><span class="sxs-lookup"><span data-stu-id="4e682-156">If you plan to use the same combination of a fiscal connector and a fiscal document provider in different companies, you should create a connector functional profile for each company.</span></span>

    2. <span data-ttu-id="4e682-157">På siden **Tekniske profiler for kobling** (**Detaljhandel \> Kanaloppsett \> Regnskapsintegrering \> Tekniske profiler for kobling**) oppretter du en teknisk profil for kobling for hver regnskapskobling.</span><span class="sxs-lookup"><span data-stu-id="4e682-157">On the **Connector technical profiles** page (**Retail \> Channel setup \> Fiscal integration \> Connector technical profiles**), create a connector technical profile for each fiscal connector.</span></span>

        1. <span data-ttu-id="4e682-158">Velg et tilkoblingsnavn.</span><span class="sxs-lookup"><span data-stu-id="4e682-158">Select a connector name.</span></span>
        2. <span data-ttu-id="4e682-159">Velg en tilkoblingstype.</span><span class="sxs-lookup"><span data-stu-id="4e682-159">Select a connector type.</span></span> <span data-ttu-id="4e682-160">For enheter som er koblet til en maskinvarestasjon, velger du **Lokal**.</span><span class="sxs-lookup"><span data-stu-id="4e682-160">For devices that are connected to a Hardware station, select **Local**.</span></span>

            > [!NOTE]
            > <span data-ttu-id="4e682-161">Bare lokale koblinger støttes.</span><span class="sxs-lookup"><span data-stu-id="4e682-161">Only local connectors are currently supported.</span></span>

        <span data-ttu-id="4e682-162">Parameterne i kategoriene **Enhet** og **Innstillinger** i en teknisk profil for kobling kan endres.</span><span class="sxs-lookup"><span data-stu-id="4e682-162">Parameters on the **Device** and **Settings** tabs in a connector technical profile can be changed.</span></span> <span data-ttu-id="4e682-163">Hvis du vil gjenopprette standardparameterne som er definert i konfigurasjon for regnskapskobling, velger du **Oppdater**.</span><span class="sxs-lookup"><span data-stu-id="4e682-163">To restore the default parameters that are defined in the fiscal connector configuration, select **Update**.</span></span> <span data-ttu-id="4e682-164">Når en ny versjon av en XML-konfigurasjon er lastet inn, får du en melding om at gjeldende regnskapskobling eller regnskapsdokumentleverandør allerede er i bruk.</span><span class="sxs-lookup"><span data-stu-id="4e682-164">While a new version of an XML configuration is loaded, you receive a message that states that the current fiscal connector or fiscal document provider is already being used.</span></span> <span data-ttu-id="4e682-165">Denne prosedyren overstyre ikke manuelle endringer som tidligere ble gjort i funksjonelle profiler for kobling og tekniske profiler for kobling.</span><span class="sxs-lookup"><span data-stu-id="4e682-165">This procedure doesn't override manual changes that were previously made in connector functional profiles and connector technical profiles.</span></span> <span data-ttu-id="4e682-166">For å bruke standardsettet med parametere fra en ny konfigurasjon klikker du på siden **Funksjonelle profiler for kobling** eller siden **Tekniske profiler for kobling** og velger **Oppdater**.</span><span class="sxs-lookup"><span data-stu-id="4e682-166">To apply the default set of parameters from a new configuration, on the **Connector functional profiles** page or the **Connector technical profiles** page, select **Update**.</span></span>

4. <span data-ttu-id="4e682-167">Opprett grupper for regnskapskobling.</span><span class="sxs-lookup"><span data-stu-id="4e682-167">Create fiscal connector groups.</span></span>

    <span data-ttu-id="4e682-168">En gruppe for regnskapskobling kombinerer funksjonelle profiler for regnskapskoblinger som utfører identiske funksjoner, og brukes på samme trinn i en regnskapsregistreringsprosess.</span><span class="sxs-lookup"><span data-stu-id="4e682-168">A fiscal connector group combines functional profiles of fiscal connectors that perform identical functions and are used at the same step of a fiscal registration process.</span></span> <span data-ttu-id="4e682-169">Hvis for eksempel flere bilagsskrivermodeller kan brukes i en detaljhandel, kan regnskapskoblinger for disse bilagsskriverne kombineres i en gruppe for regnskapskobling.</span><span class="sxs-lookup"><span data-stu-id="4e682-169">For example, if several fiscal printer models can be used in a retail store, fiscal connectors for those fiscal printers can be combined in a fiscal connector group.</span></span>
    
    1. <span data-ttu-id="4e682-170">På siden **Gruppe for regnskapskobling** (**Detaljhandel \> Kanaloppsett \> Regnskapsintegrering \> Grupper for regnskapskobling**) oppretter du en ny gruppe for regnskapskobling.</span><span class="sxs-lookup"><span data-stu-id="4e682-170">On the **Fiscal connector group** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal connector groups**), create a new fiscal connector group.</span></span>
    2. <span data-ttu-id="4e682-171">Legg til funksjonelle profiler i koblingsgruppen.</span><span class="sxs-lookup"><span data-stu-id="4e682-171">Add functional profiles to the connector group.</span></span> <span data-ttu-id="4e682-172">I kategorien **Funksjonelle profiler** velger du **Legg til** og velger et profilnummer.</span><span class="sxs-lookup"><span data-stu-id="4e682-172">On the **Functional profiles** tab, select **Add**, and select a profile number.</span></span> <span data-ttu-id="4e682-173">Hver regnskapskobling i en koblingsgruppe kan bare ha én funksjonsprofil.</span><span class="sxs-lookup"><span data-stu-id="4e682-173">Each fiscal connector in a connector group can only have one functional profile.</span></span>
    3. <span data-ttu-id="4e682-174">Hvis du vil avbryte bruken av den funksjonelle profilen, må du sette **Deaktiver** til **Ja**.</span><span class="sxs-lookup"><span data-stu-id="4e682-174">To suspend use of the functional profile, set the **Disable** option to **Yes**.</span></span> <span data-ttu-id="4e682-175">Denne endringen påvirker bare den gjeldende koblingsgruppen.</span><span class="sxs-lookup"><span data-stu-id="4e682-175">This change affects only the current connector group.</span></span> <span data-ttu-id="4e682-176">Du kan fortsette å bruke den samme funksjonsprofilen i andre tilkoblingsgrupper.</span><span class="sxs-lookup"><span data-stu-id="4e682-176">You can continue to use the same functional profile in other connector groups.</span></span>

5. <span data-ttu-id="4e682-177">Opprett en bilagsregistreringsprosess.</span><span class="sxs-lookup"><span data-stu-id="4e682-177">Create a fiscal registration process.</span></span>

    <span data-ttu-id="4e682-178">En bilagsregistreringsprosess er definert av rekkefølgen på registreringstrinnene og koblingsgruppen som brukes for hvert trinn.</span><span class="sxs-lookup"><span data-stu-id="4e682-178">A fiscal registration process is defined by the sequence of registration steps and the connector group that is used for each step.</span></span>
    
    1. <span data-ttu-id="4e682-179">På siden **Bilagsregistreringsprosess** (**Detaljhandel \> Kanaloppsett \> Regnskapsintegrering \> Bilagsregistreringsprosesser**) oppretter du en ny post for hver unike prosess i bilagsregistreringen.</span><span class="sxs-lookup"><span data-stu-id="4e682-179">On the **Fiscal registration process** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal registration processes**), create a new record for each unique process of fiscal registration.</span></span>
    2. <span data-ttu-id="4e682-180">Legg til registreringstrinn i prosessen:</span><span class="sxs-lookup"><span data-stu-id="4e682-180">Add registration steps to the process:</span></span>

        1. <span data-ttu-id="4e682-181">Velg **Legg til**.</span><span class="sxs-lookup"><span data-stu-id="4e682-181">Select **Add**.</span></span>
        2. <span data-ttu-id="4e682-182">Velg en regnskapskoblingstype.</span><span class="sxs-lookup"><span data-stu-id="4e682-182">Select a fiscal connector type.</span></span>
        3. <span data-ttu-id="4e682-183">I feltet **Gruppenummer** velger du riktig gruppe for regnskapskobling.</span><span class="sxs-lookup"><span data-stu-id="4e682-183">In the **Group number** field, select an appropriate fiscal connector group.</span></span>

6. <span data-ttu-id="4e682-184">Tilordne enheter av bilagsregistreringsprosessen til POS-profiler.</span><span class="sxs-lookup"><span data-stu-id="4e682-184">Assign entities of the fiscal registration process to POS profiles.</span></span>

    1. <span data-ttu-id="4e682-185">På siden **Funksjonalitetsprofiler for salgssted** (**Detaljhandel \> Kanaloppsett \> POS-oppsett \> POS-profiler \> Funksjonalitetsprofiler**) tilordnes bilagsregistreringsprosessen til en funksjonalitetsprofil for salgssted.</span><span class="sxs-lookup"><span data-stu-id="4e682-185">On the **POS functionality profiles** page (**Retail \> Channel setup \> POS setup \> POS profiles \> Functionality profiles**), assign the fiscal registration process to a POS functionality profile.</span></span> <span data-ttu-id="4e682-186">Velg **Rediger** og deretter i kategorien **Bilagsregistreringsprosess** i feltet **Prosessnummer** velger du en prosess.</span><span class="sxs-lookup"><span data-stu-id="4e682-186">Select **Edit**, and then, on the **Fiscal registration process** tab, in the **Process number** field, select a process.</span></span>
    2. <span data-ttu-id="4e682-187">På siden **Maskinvareprofil for salgssted** (**Detaljhandel \> Kanaloppsett \> POS-oppsett \> POS-profiler \> Maskinvareprofiler**) tilordner du tekniske profiler for kobling til en maskinvareprofil.</span><span class="sxs-lookup"><span data-stu-id="4e682-187">On the **POS hardware profile** page (**Retail \> Channel setup \> POS setup \> POS profiles \> Hardware profiles**), assign connector technical profiles to a hardware profile.</span></span> <span data-ttu-id="4e682-188">Velg **Rediger**, legg til en linje i kategorien **Eksterne regnskapsenheter** og deretter, i feltet **Profilnummer**, velger du en teknisk profil for kobling.</span><span class="sxs-lookup"><span data-stu-id="4e682-188">Select **Edit**, add a line on the **Fiscal peripherals** tab, and then, in the **Profile number** field, select a connector technical profile.</span></span>

    > [!NOTE]
    > <span data-ttu-id="4e682-189">Du kan legge til flere tekniske profiler i den samme maskinvareprofilen.</span><span class="sxs-lookup"><span data-stu-id="4e682-189">You can add several technical profiles to the same hardware profile.</span></span> <span data-ttu-id="4e682-190">En maskinvareprofil eller funksjonalitetsprofil for salgssted skal imidlertid bare ha ett skjæringspunkt med en gruppe for regnskapskobling.</span><span class="sxs-lookup"><span data-stu-id="4e682-190">However, a hardware profile or POS functionality profile should have only one intersection with any fiscal connector group.</span></span>

    <span data-ttu-id="4e682-191">Bilagsregistreringsflyten er definert av renskapsregistreringsprosessen og også av noen parametere for regnskapsintegreringskomponenter: Commerce Runtime-utvidelsen for regnskapsdokumentleverandøren og Maskinvarestasjon-utvidelsen for regnskapskoblingen.</span><span class="sxs-lookup"><span data-stu-id="4e682-191">The fiscal registration flow is defined by the fiscal registration process and also by some parameters of fiscal integration components: the Commerce runtime extension for the fiscal document provider and the Hardware station extension for the fiscal connector.</span></span>

    - <span data-ttu-id="4e682-192">Abonnementet for hendelser og transaksjoner til regnskapsregistrering er forhåndsdefinert i regnskapsdokumentleverandøren.</span><span class="sxs-lookup"><span data-stu-id="4e682-192">The subscription of events and transactions to fiscal registration is predefined in the fiscal document provider.</span></span>
    - <span data-ttu-id="4e682-193">Regnskapsdokumentleverandøren er også ansvarlig for å identifisere regnskapskoblingen som brukes til regnskapsregistrering.</span><span class="sxs-lookup"><span data-stu-id="4e682-193">The fiscal document provider is also responsible for identifying the fiscal connector that is used for fiscal registration.</span></span> <span data-ttu-id="4e682-194">Den samsvarer med de funksjonelle profilene for kobling som er inkludert i gruppen for regnskapskobling som er angitt for gjeldende trinn i regnskapsregistreringsprosessen for teknisk profil for kobling som er tilordnet til maskinvareprofilen for maskinvarestasjonen som salgsstedet er koblet til.</span><span class="sxs-lookup"><span data-stu-id="4e682-194">It matches the connector functional profiles that are included in the fiscal connector group that is specified for the current step of the fiscal registration process with the connector technical profile that is assigned to the hardware profile of the Hardware station that the POS is paired to.</span></span>
    - <span data-ttu-id="4e682-195">Regnskapsdokumentleverandøren bruker innstillingene for datatilordning fra regnskapsdokumentleverandørkonfigurasjonen for å transformere transaksjons-/hendelsesdata som for eksempel avgifter og betalinger når det genereres et regnskapsdokument.</span><span class="sxs-lookup"><span data-stu-id="4e682-195">The fiscal document provider uses the data mapping settings from the fiscal document provider configuration to transform transaction/event data such as taxes and payments while a fiscal document is generated.</span></span>
    - <span data-ttu-id="4e682-196">Når regnskapsdokumentleverandøren genererer et regnskapsdokument, kan regnskapskoblingen enten sende det til regnskapsenheten som den er, eller analysere det og gjøre det om til en sekvens med kommandoer for API-enheten, avhengig av hvordan kommunikasjonen håndteres.</span><span class="sxs-lookup"><span data-stu-id="4e682-196">When the fiscal document provider generates a fiscal document, the fiscal connector can either send it to the fiscal device as is, or parse it and transform it into a sequence of commands of the device application programming interface (API), depending on how the communication is handled.</span></span>

7. <span data-ttu-id="4e682-197">På siden **Bilagsregistreringsprosess** (**Detaljhandel \> Kanaloppsett \> Regnskapsintegrering \> Bilagsregistreringsprosesser**) velger du **Valider** for å validere regnskapsregistreringsprosessen.</span><span class="sxs-lookup"><span data-stu-id="4e682-197">On the **Fiscal registration process** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal registration processes**), select **Validate** to validate the fiscal registration process.</span></span>

    <span data-ttu-id="4e682-198">Vi anbefaler at du kjører denne typen validering i følgende tilfeller:</span><span class="sxs-lookup"><span data-stu-id="4e682-198">We recommend that you run this type of validation in the following cases:</span></span>
    
    - <span data-ttu-id="4e682-199">Når du har fullført alle innstillinger for en ny registreringsprosess, inkludert når du tilordner registreringsprosesser til salgsstedsfunksjonalitetsprofiler og maskinvareprofiler.</span><span class="sxs-lookup"><span data-stu-id="4e682-199">After you've completed all the settings for a new registration process, including when you assign registration processes to POS functionality profiles and hardware profiles.</span></span>
    - <span data-ttu-id="4e682-200">Når du endrer en eksisterende regnskapsregistreringsprosess, og disse endringene kan føre til at en annen registreringskobling velges ved kjøretid (for eksempel hvis du endrer koblingsgruppen for et trinn i regnskapsregistreringsprosessen, aktiverer en funksjonell profil for kobling i en tilkoblingsgruppe eller legger til en ny funksjonell profil for kobling i en koblingsgruppe).</span><span class="sxs-lookup"><span data-stu-id="4e682-200">After you make changes to an existing fiscal registration process, and those changes might cause a different fiscal connector to be selected at runtime (for example, if you change the connector group for a fiscal registration process step, enable a connector functional profile in a connector group, or add a new connector functional profile to a connector group).</span></span>
    - <span data-ttu-id="4e682-201">Når du gjør endringer i tilordningen av tekniske profiler for kobling til maskinvareprofiler.</span><span class="sxs-lookup"><span data-stu-id="4e682-201">After you make changes in the assignment of connector technical profiles to hardware profiles.</span></span>

8. <span data-ttu-id="4e682-202">På siden **Distribusjonsplanlegger** kjører du **1070**- og **1090**-jobber for å overføre data til kanaldatabasen.</span><span class="sxs-lookup"><span data-stu-id="4e682-202">On the **Distribution scheduler** page, run the **1070** and **1090** jobs to transfer data to the channel database.</span></span>

## <a name="set-up-fiscal-texts-for-discounts"></a><span data-ttu-id="4e682-203">Konfigurere bilagstekster for rabatter</span><span class="sxs-lookup"><span data-stu-id="4e682-203">Set up fiscal texts for discounts</span></span>

<span data-ttu-id="4e682-204">I noen tilfeller må en spesiell tekst skrives ut på en bilagskvittering hvis en rabatt brukes.</span><span class="sxs-lookup"><span data-stu-id="4e682-204">In some cases, a special text must be printed on a fiscal receipt if a discount is applied.</span></span> <span data-ttu-id="4e682-205">Du kan konfigurere bilagstekster for rabatter på siden **Gruppe for regnskapskobling** (**Detaljhandel \> Kanaloppsett \> Regnskapsintegrering \> Grupper for regnskapskobling**).</span><span class="sxs-lookup"><span data-stu-id="4e682-205">You can set up fiscal texts for discounts on the **Fiscal connector group** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal connector groups**).</span></span>

- <span data-ttu-id="4e682-206">For manuelle rabatter som brukes på salgsstedet, konfigurerer du en bilagstekst for informasjonskoden eller informasjonskodegruppen som er angitt som **Produktrabatt**-informasjonskoden i funksjonsprofilen for salgssted.</span><span class="sxs-lookup"><span data-stu-id="4e682-206">For manual discounts that are applied at the POS, you should set a fiscal text for the info code or info code group that is specified as the **Product discount** info code in the POS functionality profile.</span></span>

    1. <span data-ttu-id="4e682-207">På siden **Gruppe for regnskapskobling** velger du **Tekst for bilagskvittering**.</span><span class="sxs-lookup"><span data-stu-id="4e682-207">On the **Fiscal connector group** page, select **Text for fiscal receipt**.</span></span>
    2. <span data-ttu-id="4e682-208">I kategorien **Infokoder** velger du **Legg til** og velger en informasjonskode eller informasjonskodegruppe.</span><span class="sxs-lookup"><span data-stu-id="4e682-208">On the **Info codes** tab, select **Add**, and select an info code or info code group.</span></span>
    3. <span data-ttu-id="4e682-209">I **Informasjonskodenummer** velger du en verdi.</span><span class="sxs-lookup"><span data-stu-id="4e682-209">In the **Info code number**, select a value.</span></span>
    4. <span data-ttu-id="4e682-210">I feltet **Underkodenummer** velger en verdi hvis det kreves en delkode for den valgte informasjonskoden.</span><span class="sxs-lookup"><span data-stu-id="4e682-210">In the **Subcode number** field, select a value if a subcode is required for the selected info code.</span></span>
    5. <span data-ttu-id="4e682-211">I feltet **Tekst for bilagskvittering** angir du en bilagstekst som skal skrives ut på en bilagskvittering.</span><span class="sxs-lookup"><span data-stu-id="4e682-211">In the **Text for fiscal receipt** field, specify a fiscal text that should be printed on a fiscal receipt.</span></span>
    6. <span data-ttu-id="4e682-212">Sett alternativet **Skriv ut brukerinndata på bilagskvittering** til **Ja** for å overstyre teksten på en bilagskvittering med informasjon som brukeren angir manuelt på salgsstedet.</span><span class="sxs-lookup"><span data-stu-id="4e682-212">Set the **Print user input on fiscal receipt** option to **Yes** to override the text on a fiscal receipt with information that a user manually enters at the POS.</span></span> <span data-ttu-id="4e682-213">Dette alternativet gjelder bare for informasjonskoder som har inndatatypen **Tekst**.</span><span class="sxs-lookup"><span data-stu-id="4e682-213">This option applies only to info codes that have an input type of **Text**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="4e682-214">Du kan angi en bilagstekst for flere informasjonskoder for å støtte scenarioer der informasjonskodegrupper, koblede infokoder og utløste infokoder brukes.</span><span class="sxs-lookup"><span data-stu-id="4e682-214">You can specify a fiscal text for several info codes to support scenarios where info code groups, linked info codes, and triggered info codes are used.</span></span> <span data-ttu-id="4e682-215">I disse scenarioene inneholder bilagskvitteringene bilagstekstene fra alle infokoder som er koblet til transaksjonslinjen der rabatten ble brukt.</span><span class="sxs-lookup"><span data-stu-id="4e682-215">In these scenarios, the fiscal receipt will contain the fiscal texts from all info codes that are linked to the transaction line where the discount was applied.</span></span>

- <span data-ttu-id="4e682-216">Du bør definere en regnskapstekst for rabatt-ID-en for kanalspesifikke rabatter.</span><span class="sxs-lookup"><span data-stu-id="4e682-216">For channel-specific discounts, you should define a fiscal text for the discount ID.</span></span>

    1. <span data-ttu-id="4e682-217">På siden **Gruppe for regnskapskobling** velger du **Tekst for bilagskvittering**.</span><span class="sxs-lookup"><span data-stu-id="4e682-217">On the **Fiscal connector group** page, select **Text for fiscal receipt**.</span></span>
    2. <span data-ttu-id="4e682-218">I kategorien **Rabatter** velger du **Legg til**, og deretter velger du rabatt-ID.</span><span class="sxs-lookup"><span data-stu-id="4e682-218">On the **Discounts** tab, select **Add**, and select a discount ID.</span></span>
    3. <span data-ttu-id="4e682-219">I feltet **Tekst for bilagskvittering** angir du en bilagstekst som skal skrives ut på en bilagskvittering.</span><span class="sxs-lookup"><span data-stu-id="4e682-219">In the **Text for fiscal receipt** field, specify a fiscal text that should be printed on a fiscal receipt.</span></span>

    > [!NOTE]
    > <span data-ttu-id="4e682-220">Hvis flere rabatter brukes på samme transaksjonslinje, vil bilagskvitteringen inneholde bilagstekster fra alle rabatter som er koblet til denne transaksjonslinjen.</span><span class="sxs-lookup"><span data-stu-id="4e682-220">If several discounts are applied to the same transaction line, the fiscal receipt will contain fiscal texts from all discounts that are linked to those transaction line.</span></span>

## <a name="set-error-handling-settings"></a><span data-ttu-id="4e682-221">Angi innstillinger for feilbehandling</span><span class="sxs-lookup"><span data-stu-id="4e682-221">Set error handling settings</span></span>

<span data-ttu-id="4e682-222">Feilbehandlingsalternativene som er tilgjengelige i regnskapsintegrasjonen, defineres i bilagsregistreringsprosessen.</span><span class="sxs-lookup"><span data-stu-id="4e682-222">The error handling options that are available in the fiscal integration are set in the fiscal registration process.</span></span> <span data-ttu-id="4e682-223">Hvis du vil ha mer informasjon om feilbehandling i regnskapsintegreringen, kan du se [Feilbehandling](fiscal-integration-for-retail-channel.md#error-handling).</span><span class="sxs-lookup"><span data-stu-id="4e682-223">For more information about error handling in the fiscal integration, see [Error handling](fiscal-integration-for-retail-channel.md#error-handling).</span></span>

1. <span data-ttu-id="4e682-224">På siden **Bilagsregistreringsprosess** (**Detaljhandel \> Kanaloppsett \> Regnskapsintegrering \> Bilagsregistreringsprosesser**) kan du angi følgende parametere for hvert trinn i bilagsregistreringsprosessen.</span><span class="sxs-lookup"><span data-stu-id="4e682-224">On the **Fiscal registration process** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal registration processes**), you can set the following parameters for each step of the fiscal registration process:</span></span>

    - <span data-ttu-id="4e682-225">**Tillat overhopping** – Denne parameteren aktiverer **Hopp over**-alternativet i dialogboksen for feilbehandling.</span><span class="sxs-lookup"><span data-stu-id="4e682-225">**Allow skip** – This parameter enables the **Skip** option in the error handling dialog box.</span></span>
    - <span data-ttu-id="4e682-226">**Tillat Merk som registrert** – Denne parameteren aktiverer **Merk som registrert**-alternativer i dialogboksen for feilbehandling.</span><span class="sxs-lookup"><span data-stu-id="4e682-226">**Allow mark as registered** – This parameter enables the **Mark as registered** option in the error handling dialog box.</span></span>

2. <span data-ttu-id="4e682-227">Alternativene **Hopp over** og **Merk som registrert** i dialogboksen for feilbehandling krever **Tillat Hopp over eller Merk som registrert**-tillatelser.</span><span class="sxs-lookup"><span data-stu-id="4e682-227">The **Skip** and **Mark as registered** options in the error handling dialog box require the **Allow skip or mark as registered** permission.</span></span> <span data-ttu-id="4e682-228">Derfor må du, på siden **Tillatelsesgrupper** (**Detaljhandel \> Ansatte \> Tillatelsesgrupper**), aktivere tillatelsen **Tillat Hopp over eller Merk som registrert**.</span><span class="sxs-lookup"><span data-stu-id="4e682-228">Therefore, on the **Permission groups** page (**Retail \> Employees \> Permission groups**), enable the **Allow skip or mark as registered** permission.</span></span>
3. <span data-ttu-id="4e682-229">Alternativene **Hopp over** og **Merk som registrert** lar operatorer angi tilleggsinformasjon når bilagsregistreringen mislykkes.</span><span class="sxs-lookup"><span data-stu-id="4e682-229">The **Skip** and **Mark as registered** options let operators enter additional information when fiscal registration fails.</span></span> <span data-ttu-id="4e682-230">Hvis du vil gjøre denne funksjonaliteten tilgjengelig, må du angi infokodene **Hopp over** og **Merk som registrert** i en gruppe for regnskapskobling.</span><span class="sxs-lookup"><span data-stu-id="4e682-230">To make this functionality available, you should specify the **Skip** and **Mark as registered** info codes on a fiscal connector group.</span></span> <span data-ttu-id="4e682-231">Informasjonen som operatorene angir, lagres deretter som en infokodetransaksjon som er knyttet til regnskapstransaksjon.</span><span class="sxs-lookup"><span data-stu-id="4e682-231">The information that operators enter is then saved as an info code transaction that is linked to the fiscal transaction.</span></span> <span data-ttu-id="4e682-232">Hvis du vil ha mer informasjon om infokoder, kan du se [Informasjonskoder og informasjonskodegrupper](../info-codes-retail.md).</span><span class="sxs-lookup"><span data-stu-id="4e682-232">For more details about info codes, see [Info codes and info code groups](../info-codes-retail.md).</span></span>

    > [!NOTE]
    > <span data-ttu-id="4e682-233">**Produkt**-utløserfunksjonen støttes ikke for informasjonskodene som brukes til **Hopp over** og **Merk som registrert** i grupper for regnskapskobling.</span><span class="sxs-lookup"><span data-stu-id="4e682-233">The **Product** trigger function isn't supported for the info codes that are used for **Skip** and **Mark as registered** in fiscal connector groups.</span></span>

    - <span data-ttu-id="4e682-234">På siden **Gruppe for regnskapskobling** i fanen **Infokoder** velger du infokoder eller informasjonskodegrupper i feltene **Hopp over** og **Merk som registrert**.</span><span class="sxs-lookup"><span data-stu-id="4e682-234">On the **Fiscal connector group** page, on the **Info codes** tab, select info codes or info code groups in the **Skip** and **Mark as registered** fields.</span></span>

    > [!NOTE]
    > <span data-ttu-id="4e682-235">Ett regnskapsdokument og ett ikke-regnskapsdokument kan genereres på et hvilket som helst trinn i bilagsregistreringsprosessen.</span><span class="sxs-lookup"><span data-stu-id="4e682-235">One fiscal document and one non-fiscal document can be generated on any step of a fiscal registration process.</span></span> <span data-ttu-id="4e682-236">En finansdokumentleverandørutvidelse identifiserer hver type transaksjon eller hendelse som er relatert til regnskapsdokumenter eller ikke-regnskapsdokumenter.</span><span class="sxs-lookup"><span data-stu-id="4e682-236">A fiscal document provider extension identifies every type of transaction or event as related to fiscal or non-fiscal documents.</span></span> <span data-ttu-id="4e682-237">Feilhåndteringsfunksjonen gjelder bare for regnskapsdokumenter.</span><span class="sxs-lookup"><span data-stu-id="4e682-237">The error handling feature applies only to fiscal documents.</span></span>
    >
    > - <span data-ttu-id="4e682-238">**Regnskapsdokument** – Et obligatorisk dokument som må registreres med suksess (for eksempel en bilagskvittering).</span><span class="sxs-lookup"><span data-stu-id="4e682-238">**Fiscal document** – A mandatory document that should be registered successfully (for example, a fiscal receipt).</span></span>
    > - <span data-ttu-id="4e682-239">**Ikke-regnskapsdokument** – Et ekstra dokument for transaksjonen eller hendelsen (for eksempel en gavekortseddel).</span><span class="sxs-lookup"><span data-stu-id="4e682-239">**Non-fiscal document** – A supplementary document for the transaction or event (for example, a gift card slip).</span></span>

## <a name="set-up-fiscal-xz-reports-from-the-pos"></a><span data-ttu-id="4e682-240">Konfigurere X-/Z-regnskapsrapporter fra salgsstedet</span><span class="sxs-lookup"><span data-stu-id="4e682-240">Set up fiscal X/Z reports from the POS</span></span>

<span data-ttu-id="4e682-241">For å aktivere X-/Z-regnskapsrapporter fra salgsstedet bør du legge til nye knapper i et salgsstedsoppsett.</span><span class="sxs-lookup"><span data-stu-id="4e682-241">To enable fiscal X/Z reports to be run from the POS, you should add new buttons to a POS layout.</span></span>

- <span data-ttu-id="4e682-242">På siden **Knappegrupper** følger du instruksjonene i [Legge til en egendefinert operasjonsknapp i salgsstedsoppsettet i Detaljhandel Hovedkontor](../dev-itpro/add-pos-operations.md#add-a-custom-operation-button-to-the-pos-layout-in-retail-headquarters) for å installere utformingen og oppdatere et salgsstedsoppsett.</span><span class="sxs-lookup"><span data-stu-id="4e682-242">On the **Button grids** page, follow the instructions in [Add a custom operation button to the POS layout in Retail headquarters](../dev-itpro/add-pos-operations.md#add-a-custom-operation-button-to-the-pos-layout-in-retail-headquarters) to install the designer and update a POS layout.</span></span>

    1. <span data-ttu-id="4e682-243">Velg oppsettet som skal oppdateres.</span><span class="sxs-lookup"><span data-stu-id="4e682-243">Select the layout to update.</span></span> 
    2. <span data-ttu-id="4e682-244">Legg til en ny knapp, og angi **Skriv ut regnskapsår X**-knappeegenskapen.</span><span class="sxs-lookup"><span data-stu-id="4e682-244">Add a new button, and set the **Print fiscal X** button property.</span></span>
    3. <span data-ttu-id="4e682-245">Legg til en ny knapp, og angi **Skriv ut regnskapsår Z**-knappeegenskapen.</span><span class="sxs-lookup"><span data-stu-id="4e682-245">Add a new button, and set the **Print fiscal Z** button property.</span></span>
    4. <span data-ttu-id="4e682-246">På siden **Distribusjonsplan** kjører du **1090**-jobben for å overføre endringer til kanaldatabasen.</span><span class="sxs-lookup"><span data-stu-id="4e682-246">On the **Distribution schedule** page, run the **1090** job to transfer changes to the channel database.</span></span>

