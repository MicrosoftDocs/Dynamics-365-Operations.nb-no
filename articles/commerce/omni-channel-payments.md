---
title: Oversikt over betalinger for omnikanal
description: Dette emnet gir en oversikt over omnikanalinnbetalinger i Dynamics 365 Commerce.
author: rubendel
manager: AnnBe
ms.date: 09/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application user
ms.reviewer: josaw
ms.search.scope: Operations, Retail
ms.custom: 141393
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Retail
ms.author: rubendel
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: AX 8.1.3
ms.openlocfilehash: 80eaf36fb382e0ebe0a66383ea17ab76faa07dfa
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: nb-NO
ms.lasthandoff: 10/13/2020
ms.locfileid: "4414765"
---
# <a name="omni-channel-payments-overview"></a><span data-ttu-id="60adc-103">Oversikt over betalinger for omnikanal</span><span class="sxs-lookup"><span data-stu-id="60adc-103">Omni-channel payments overview</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="60adc-104">Dette emnet gir en oversikt over omnikanalinnbetalinger i Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="60adc-104">This topic provides an overview of omni-channel payments in Dynamics 365 Commerce.</span></span> <span data-ttu-id="60adc-105">Det inneholder en omfattende liste over støttede scenarioer, informasjon om funksjonalitet, oppsett og feilsøking, og beskrivelser av enkelte vanlige problemer.</span><span class="sxs-lookup"><span data-stu-id="60adc-105">It includes a comprehensive list of supported scenarios, information about functionality, setup, and troubleshooting, and descriptions of some typical issues.</span></span>

## <a name="key-terms"></a><span data-ttu-id="60adc-106">Viktige termer</span><span class="sxs-lookup"><span data-stu-id="60adc-106">Key terms</span></span>

| <span data-ttu-id="60adc-107">Semester</span><span class="sxs-lookup"><span data-stu-id="60adc-107">Term</span></span> | <span data-ttu-id="60adc-108">Beskrivelse</span><span class="sxs-lookup"><span data-stu-id="60adc-108">Description</span></span> |
|---|---|
| <span data-ttu-id="60adc-109">Token </span><span class="sxs-lookup"><span data-stu-id="60adc-109">Token</span></span> | <span data-ttu-id="60adc-110">En streng med data som en betalingsprosessor gir som en referanse.</span><span class="sxs-lookup"><span data-stu-id="60adc-110">A string of data that a payment processor provides as a reference.</span></span> <span data-ttu-id="60adc-111">Tokener kan representere betalingskortnumre, betalingsautoriseringer og tidligere betalingsregistreringer.</span><span class="sxs-lookup"><span data-stu-id="60adc-111">Tokens can represent payment card numbers, payment authorizations, and previous payment captures.</span></span> <span data-ttu-id="60adc-112">Tokener er viktige, fordi de bidrar til å holde sensitive data utenfor salgsstedssystemet.</span><span class="sxs-lookup"><span data-stu-id="60adc-112">Tokens are important because they help keep sensitive data out of the point of sale (POS) system.</span></span> <span data-ttu-id="60adc-113">De kalles noen ganger også for *referanser*.</span><span class="sxs-lookup"><span data-stu-id="60adc-113">They are sometimes also referred to as *references*.</span></span> |
| <span data-ttu-id="60adc-114">Korttoken</span><span class="sxs-lookup"><span data-stu-id="60adc-114">Card token</span></span> | <span data-ttu-id="60adc-115">Et token som en betalingsprosessor gir for lagring i POS-systemet.</span><span class="sxs-lookup"><span data-stu-id="60adc-115">A token that a payment processor provides for storage in the POS system.</span></span> <span data-ttu-id="60adc-116">Et korttoken kan bare brukes av forretningsenheten som mottar det.</span><span class="sxs-lookup"><span data-stu-id="60adc-116">A card token can be used only by the merchant who receives it.</span></span> <span data-ttu-id="60adc-117">Korttoken kalles noen ganger også for *kortreferanser*.</span><span class="sxs-lookup"><span data-stu-id="60adc-117">Card tokens are sometimes also referred to as *card references*.</span></span> |
| <span data-ttu-id="60adc-118">Token for autorisasjon</span><span class="sxs-lookup"><span data-stu-id="60adc-118">Authorization (auth) token</span></span> | <span data-ttu-id="60adc-119">En unik ID som en betalingsprosess gir som en del av svaret den sender til et POS-system etter at POS-systemet har gjort en godkjenningsforespørsel.</span><span class="sxs-lookup"><span data-stu-id="60adc-119">A unique ID that a payment process provides as part of the response that it sends to a POS system after the POS system makes an authorization request.</span></span> <span data-ttu-id="60adc-120">Et autorisasjonssymbol kan brukes senere hvis prosessoren kalles for å utføre handlinger som tilbakeføring eller annullering av autorisasjonen.</span><span class="sxs-lookup"><span data-stu-id="60adc-120">An authorization token can be used later if the processor is called to perform actions such as reversing or voiding the authorization.</span></span> <span data-ttu-id="60adc-121">Det brukes imidlertid oftes til å fange opp midler når en ordre er fullført eller en transaksjon er sluttført.</span><span class="sxs-lookup"><span data-stu-id="60adc-121">However, it's most often used to capture funds when an order is fulfilled or a transaction is finalized.</span></span> <span data-ttu-id="60adc-122">Autorisasjonstoken kalles noen ganger også for *autorisasjonsreferanser*.</span><span class="sxs-lookup"><span data-stu-id="60adc-122">Authorization tokens are sometimes also referred to as *authorization references*.</span></span> |
| <span data-ttu-id="60adc-123">Registreringstoken</span><span class="sxs-lookup"><span data-stu-id="60adc-123">Capture token</span></span> | <span data-ttu-id="60adc-124">En referanse som en betalingsprosessor leverer til et POS-system når en betaling sluttføres eller registreres.</span><span class="sxs-lookup"><span data-stu-id="60adc-124">A reference that a payment processor provides to a POS system when a payment is finalized or captured.</span></span> <span data-ttu-id="60adc-125">Registreringssymbolet kan deretter brukes til å referere til betalingsregistreringen i etterfølgende operasjoner, for eksempel refunderingsforespørsler.</span><span class="sxs-lookup"><span data-stu-id="60adc-125">The capture token can then be used to reference the payment capture in subsequent operations, such as refund requests.</span></span> | 
| <span data-ttu-id="60adc-126">Kort finnes ikke</span><span class="sxs-lookup"><span data-stu-id="60adc-126">Card not present</span></span> | <span data-ttu-id="60adc-127">En betegnelse som refererer til betalingstransaksjoner der et fysisk kort ikke blir presentert.</span><span class="sxs-lookup"><span data-stu-id="60adc-127">A term that refers to payment transactions where a physical card isn't presented.</span></span> <span data-ttu-id="60adc-128">Disse transaksjonene kan for eksempel forekomme i scenarier med e-handel eller telefonsenter.</span><span class="sxs-lookup"><span data-stu-id="60adc-128">For example, these transactions can occur in e-commerce or call center scenarios.</span></span> <span data-ttu-id="60adc-129">For disse transaksjonene angis den betalingsrelaterte informasjonen manuelt på et webområde for e-handel, i en telefonsenterflyt eller på salgsstedet eller betalingsterminalen.</span><span class="sxs-lookup"><span data-stu-id="60adc-129">For these transactions, the payment-related information is manually entered on an e-commerce website, in a call center flow, or on the POS or payment terminal.</span></span> |
| <span data-ttu-id="60adc-130">Kort finnes</span><span class="sxs-lookup"><span data-stu-id="60adc-130">Card present</span></span> | <span data-ttu-id="60adc-131">En betegnelse som refererer til betalingstransaksjoner der et fysisk kort presenteres og brukes på en betalingsterminal som er koblet til Microsoft Dynamics 365-salgsstedssystemet.</span><span class="sxs-lookup"><span data-stu-id="60adc-131">A term that refers to payment transactions where a physical card is presented and used on a payment terminal that is connected to the Microsoft Dynamics 365 POS system.</span></span> |

## <a name="overview"></a><span data-ttu-id="60adc-132">Oversikt</span><span class="sxs-lookup"><span data-stu-id="60adc-132">Overview</span></span>

<span data-ttu-id="60adc-133">Vanligvis beskriver begrepet *omnikanalbetalinger* muligheten til å opprette en ordre i én kanal og fylle den ut i en annen kanal.</span><span class="sxs-lookup"><span data-stu-id="60adc-133">In general, the term *omni-channel payments* describes the ability to create an order in one channel and fulfill it in another channel.</span></span> <span data-ttu-id="60adc-134">Nøkkelen til omnikanalbetalingsstøtte er å bevare betalingsdetaljer sammen med resten av ordredetaljene, og deretter bruke betalingsdetaljene når ordren tilbakekalles eller behandles i en annen kanal.</span><span class="sxs-lookup"><span data-stu-id="60adc-134">The key to omni-channel payment support is preserving payment details together with the rest of the order details, and then using those payment details when the order is recalled or processed in another channel.</span></span> <span data-ttu-id="60adc-135">Et klassisk eksempel er scenarioet "Kjøp på nett, hent i butikk".</span><span class="sxs-lookup"><span data-stu-id="60adc-135">A classic example is the "Buy online, pick up in store" scenario.</span></span> <span data-ttu-id="60adc-136">I dette scenarioet legges betalingsdetaljene til når ordren opprettes på nettet.</span><span class="sxs-lookup"><span data-stu-id="60adc-136">In this scenario, the payment details are added when the order is created online.</span></span> <span data-ttu-id="60adc-137">De kalles deretter tilbake på salgsstedet for å belaste kundens betalingskort på hentetidspunktet.</span><span class="sxs-lookup"><span data-stu-id="60adc-137">They are then recalled at the POS to charge the customer's payment card at the time of pickup.</span></span> 

<span data-ttu-id="60adc-138">Alle scenarioene som beskrives i dette emnet, kan implementeres ved hjelp av standard SDK for betalinger som leveres med Commerce.</span><span class="sxs-lookup"><span data-stu-id="60adc-138">All the scenarios that are described in this topic can be implemented by using the standard Payments software development kit (SDK) that is provided with Commerce.</span></span> <span data-ttu-id="60adc-139">[Dynamics 365 Payment Connector for Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) gir en enkel implementering av alle scenarioer som er beskrevet her.</span><span class="sxs-lookup"><span data-stu-id="60adc-139">The [Dynamics 365 Payment Connector for Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) provides an out-of-box implementation of every scenario that is described here.</span></span> 

### <a name="prerequisites"></a><span data-ttu-id="60adc-140">Forutsetninger</span><span class="sxs-lookup"><span data-stu-id="60adc-140">Prerequisites</span></span>

<span data-ttu-id="60adc-141">Alle scenarioer som beskrives i dette emnet, krever en betalingskobling som støtter omnikanalbetalinger.</span><span class="sxs-lookup"><span data-stu-id="60adc-141">Every scenario that is described in this topic requires a payment connector that supports omni-channel payments.</span></span> <span data-ttu-id="60adc-142">Den medfølgende Adyen-tilkoblingen kan også brukes, fordi den støtter scenarioene som er tilgjengelige via betalings-SDK-en.</span><span class="sxs-lookup"><span data-stu-id="60adc-142">The out-of-box Adyen connector can also be used, because it supports the scenarios that are made available through the Payments SDK.</span></span> <span data-ttu-id="60adc-143">Hvis du vil ha mer informasjon om hvordan du implementerer betalingskoblinger og Retail-SDK-en generelt, kan du gå til [Startside for detaljhandel for IT-teknikere og utviklere](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span><span class="sxs-lookup"><span data-stu-id="60adc-143">For more information about how to implement payment connectors, and about the Retail SDK in general, visit the [Retail for IT pros and developers home page](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span></span>

#### <a name="supported-versions"></a><span data-ttu-id="60adc-144">Støttede versjoner</span><span class="sxs-lookup"><span data-stu-id="60adc-144">Supported versions</span></span>

<span data-ttu-id="60adc-145">Omnikanalbetalingsfunksjonene som beskrives i dette emnet, er utgitt som en del av Microsoft Dynamics 365 for Retail versjon 8.1.3.</span><span class="sxs-lookup"><span data-stu-id="60adc-145">The omni-channel payment capabilities that are described in this topic were released as part of Microsoft Dynamics 365 for Retail version 8.1.3.</span></span> 

#### <a name="card-present-and-card-not-present-connectors"></a><span data-ttu-id="60adc-146">"Kort finnes"- og "Kort finnes ikke"-koblinger</span><span class="sxs-lookup"><span data-stu-id="60adc-146">"Card present" and "card not present" connectors</span></span>

<span data-ttu-id="60adc-147">Betalings-SDK-en er avhengig av to sett med APIer (Application Programming Interface) for betalinger.</span><span class="sxs-lookup"><span data-stu-id="60adc-147">The Payments SDK relies on two sets of application programming interfaces (APIs) for payments.</span></span> <span data-ttu-id="60adc-148">Det første settet med APIer heter **iPaymentProcessor**.</span><span class="sxs-lookup"><span data-stu-id="60adc-148">The first set of APIs is named **iPaymentProcessor**.</span></span> <span data-ttu-id="60adc-149">Den brukes til å implementere "kort finnes ikke"-betalingskoblinger som kan brukes i telefonsentre og med e-handelsplattformen til Microsoft Dynamics.</span><span class="sxs-lookup"><span data-stu-id="60adc-149">It's used to implement "card not present" payment connectors that can be used in call centers and with the Microsoft Dynamics e-Commerce platform.</span></span> <span data-ttu-id="60adc-150">Hvis du vil ha mer informasjon om **iPaymentProcessor**-grensesnittet, kan du se hvitboken [Implementere en betalingskobling og betalingsenhet](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf), som dekker betalinger.</span><span class="sxs-lookup"><span data-stu-id="60adc-150">For more information about the **iPaymentProcessor** interface, see the [Implement a payment connector and a payment device](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) white paper, which covers payments.</span></span> 

<span data-ttu-id="60adc-151">Det andre settet med APIer heter **iNamedRequestHandler**.</span><span class="sxs-lookup"><span data-stu-id="60adc-151">The second set of APIs is named **iNamedRequestHandler**.</span></span> <span data-ttu-id="60adc-152">Det støtter implementering av "kort finnes"-betalingsintegreringer som bruker en betalingsterminal.</span><span class="sxs-lookup"><span data-stu-id="60adc-152">It supports the implementation of "card present" payment integrations that use a payment terminal.</span></span> <span data-ttu-id="60adc-153">Hvis du vil ha mer informasjon om **iNamedRequestHandler**-grensesnittet, kan du se [Opprette en betalingsintegrering for en betalingsterminal](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span><span class="sxs-lookup"><span data-stu-id="60adc-153">For more information about the **iNamedRequestHandler** interface, see [Create a payment integration for a payment terminal](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span></span> 

### <a name="setup-and-configuration"></a><span data-ttu-id="60adc-154">Oppsett og konfigurasjon</span><span class="sxs-lookup"><span data-stu-id="60adc-154">Setup and configuration</span></span>

<span data-ttu-id="60adc-155">Følgende komponenter og oppsettrinn kreves:</span><span class="sxs-lookup"><span data-stu-id="60adc-155">The following components and setup steps are required:</span></span>

- <span data-ttu-id="60adc-156">**eCommerce-integrering:** En integrering med Commerce er nødvendig for å støtte scenarier der en ordre kommer fra en nettbutikkfasade.</span><span class="sxs-lookup"><span data-stu-id="60adc-156">**eCommerce integration:** An integration with Commerce is required to support scenarios where an order originates in an online storefront.</span></span> <span data-ttu-id="60adc-157">Hvis du vil ha mer informasjon om Retail e-Commerce-SDK-en, kan du se [SDK for e-Commerce-plattformen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span><span class="sxs-lookup"><span data-stu-id="60adc-157">For more information about the Retail e-Commerce SDK, see [e-Commerce platform software development kit (SDK)](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span></span> <span data-ttu-id="60adc-158">I et demonstrasjonsmiljø støtter referansebutikkfasaden omnikanalbetalingsscenarioer.</span><span class="sxs-lookup"><span data-stu-id="60adc-158">In a demo environment, the reference storefront supports omni-channel payment scenarios.</span></span> 
- <span data-ttu-id="60adc-159">**Konfigurasjon av onlinebetalinger:** Oppsettet for Internett-kanalen må inkludere en betalingskobling som er oppdatert for å støtte omnikanalbetalinger.</span><span class="sxs-lookup"><span data-stu-id="60adc-159">**Online payments configuration:** The setup of the online channel must include a payment connector that has been updated to support omni-channel payments.</span></span> <span data-ttu-id="60adc-160">Alternativt kan en medfølgende betalingskobling brukes.</span><span class="sxs-lookup"><span data-stu-id="60adc-160">Alternatively, the out-of-box payment connector can be used.</span></span> <span data-ttu-id="60adc-161">Hvis du vil ha informasjon om hvordan du konfigurerer Adyen-betalingskoblingen for nettbutikker, se [Adyen-betalingskobling](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span><span class="sxs-lookup"><span data-stu-id="60adc-161">For information about how to configure the Adyen payment connector for online stores, see [Adyen payment connector](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span></span> <span data-ttu-id="60adc-162">I tillegg til eCommerce-oppsettrinnene som beskrives i dette emnet, må parameteren **Tillat lagring av betalingsinformasjon i e-handel** settes til **sann** i innstillingene for Adyen-koblingen.</span><span class="sxs-lookup"><span data-stu-id="60adc-162">In addition to the eCommerce setup steps that are described in that topic, the **Allow saving payment information in e-commerce** parameter must be set to **True** in the settings for the Adyen connector.</span></span> 
- <span data-ttu-id="60adc-163">**Omnikanalbetalingskonfigurasjon:** I back office gå til **Retail og Commerce \> Hovedkvarteroppsett \> Parametere \> Delte handelsparametere**.</span><span class="sxs-lookup"><span data-stu-id="60adc-163">**Omni-channel payments configuration:** In the back office, go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce shared parameters**.</span></span> <span data-ttu-id="60adc-164">I kategorien **Omnikanal-betalinger** setter du alternativet **Bruk betalinger for omnikanal** til **Ja**.</span><span class="sxs-lookup"><span data-stu-id="60adc-164">Then, on the **Omni-channel payments** tab, set the **Use omni-channel payments** option to **Yes**.</span></span> <span data-ttu-id="60adc-165">I Commerce versjon 10.0.12 og senere er denne innstillingen i arbeidsområdet **Funksjonsbehandling**.</span><span class="sxs-lookup"><span data-stu-id="60adc-165">In Commerce versions 10.0.12 and later, this setting is in the **Feature Management** workspace.</span></span> <span data-ttu-id="60adc-166">Velg funksjonen **Omnikanal-betalinger**, og klikk på **Aktiver nå**.</span><span class="sxs-lookup"><span data-stu-id="60adc-166">Select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="60adc-167">**Betalingstjenester:** Telefonsenteret bruker standard betalingskobling på **Betalingstjenester**-siden for å behandle betalinger.</span><span class="sxs-lookup"><span data-stu-id="60adc-167">**Payment services:** The call center uses the default payment connector on the **Payment services** page to process payments.</span></span> <span data-ttu-id="60adc-168">Hvis du vil ha støtte for scenarioer som "Bestille på telefonsenter og hente i butikk", må denne standard betalingskoblingen være Adyen-betalingskoblingen eller en betalingskobling som oppfyller implementeringskravene for omnikanalbetalinger.</span><span class="sxs-lookup"><span data-stu-id="60adc-168">To support scenarios such as "Buy in call center, pick up in store," this default payment connector must be the Adyen payment connector or a payment connector that meets the implementation requirements for omni-channel payments.</span></span>
- <span data-ttu-id="60adc-169">**EFT-tjeneste:** Betalinger via en betalingsterminal må defineres i hurtigfanen **EFT-tjeneste** i maskinvareprofilen.</span><span class="sxs-lookup"><span data-stu-id="60adc-169">**EFT service:** Payments through a payment terminal must be set up on the **EFT service** FastTab of the hardware profile.</span></span> <span data-ttu-id="60adc-170">Adyen-koblingen støtter standard omnikanalbetalingsscenarier.</span><span class="sxs-lookup"><span data-stu-id="60adc-170">The Adyen connector supports omni-channel payments scenarios out of the box.</span></span> <span data-ttu-id="60adc-171">Andre betalingskoblinger som støtter **iNamedRequestHandler**-grensesnittet, kan også brukes hvis de støtter omnikanalbetalinger.</span><span class="sxs-lookup"><span data-stu-id="60adc-171">Other payment connectors that support the **iNamedRequestHandler** interface can also be used if they support omni-channel payments.</span></span>
- <span data-ttu-id="60adc-172">**Betalingskoblingstilgjengelighet:** Når en ordre kalles tilbake, vil betalingsbeløplinjene som tilbakekalles sammen med ordren, inkludere navnet på betalingskoblingen som ble brukt til å opprette godkjenningene som er knyttet til ordren.</span><span class="sxs-lookup"><span data-stu-id="60adc-172">**Payment connector availability:** When an order is recalled, the payment tender lines that are recalled together with the order include the name of the payment connector that was used to create the authorizations that are associated with that order.</span></span> <span data-ttu-id="60adc-173">Når ordren er oppfylt, prøver betalings-SDKen å bruke den samme koblingen som ble brukt til å opprette den opprinnelige autorisasjonen.</span><span class="sxs-lookup"><span data-stu-id="60adc-173">When the order is fulfilled, the Payments SDK tries to use the same connector that was used to create the original authorization.</span></span> <span data-ttu-id="60adc-174">Derfor må en betalingskobling som har samme forhandleregenskaper, være tilgjengelige for henting.</span><span class="sxs-lookup"><span data-stu-id="60adc-174">Therefore, a payment connector that has the same merchant properties must be available for capture.</span></span> 
- <span data-ttu-id="60adc-175">**Korttyper:** For at omnikanalscenarioer skal fungere skikkelig, må hver kanal ha samme oppsett for betalingsmiddeltyper som kan brukes for omnikanalen.</span><span class="sxs-lookup"><span data-stu-id="60adc-175">**Card types:** For omni-channel scenarios to work properly, each channel must have the same setup for tender types that can be used for omni-channel.</span></span> <span data-ttu-id="60adc-176">Dette oppsettet omfatter betalingsmåte-IDer og korttype-IDer.</span><span class="sxs-lookup"><span data-stu-id="60adc-176">This setup includes payment method IDs and card type IDs.</span></span> <span data-ttu-id="60adc-177">Hvis for eksempel betalingsmiddeltypen **Kort** har IDen **2** i nettbutikkoppsettet, må den ha samme ID i oppsettet for detaljhandelsbutikken.</span><span class="sxs-lookup"><span data-stu-id="60adc-177">For example, if the **Cards** tender type has an ID of **2** in the online store setup, it should have the same ID in the retail store setup.</span></span> <span data-ttu-id="60adc-178">Det samme kravet gjelder for korttype-IDer.</span><span class="sxs-lookup"><span data-stu-id="60adc-178">The same requirement applies to card type IDs.</span></span> <span data-ttu-id="60adc-179">Hvis kortnummer **12** er satt til **Visa** i nettbutikken, skal den samme IDen defineres for detaljhandelsbutikken.</span><span class="sxs-lookup"><span data-stu-id="60adc-179">If card number **12** is set to **VISA** in the online store, the same ID should be set up for the retail store.</span></span> 
- <span data-ttu-id="60adc-180">Retail Modern POS for Windows eller Android med innebygd maskinvarestasjon -eller-</span><span class="sxs-lookup"><span data-stu-id="60adc-180">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="60adc-181">Modern POS for iOS eller Cloud POS med tilkoblet, delt maskinvarestasjon.</span><span class="sxs-lookup"><span data-stu-id="60adc-181">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

### <a name="basic-principle-supporting-omni-channel-payments"></a><span data-ttu-id="60adc-182">Grunnleggende prinsipp som støtter omnikanalbetalinger</span><span class="sxs-lookup"><span data-stu-id="60adc-182">Basic principle supporting omni-channel payments</span></span>

<span data-ttu-id="60adc-183">Betalingskoblinger og betalingsprosessorer bruker tokener, eller referanser, til å referere til samhandlinger som er knyttet til kortbetalinger.</span><span class="sxs-lookup"><span data-stu-id="60adc-183">Payment connectors and payment processors use tokens, or references, to reference interactions that are related to card payments.</span></span> <span data-ttu-id="60adc-184">Når det for eksempel bes om en betalingsautorisering, gis det en referanse til denne autorisasjonen.</span><span class="sxs-lookup"><span data-stu-id="60adc-184">For example, when a payment authorization is requested, a reference to that authorization is provided.</span></span> <span data-ttu-id="60adc-185">Autorisasjonen kan derfor refereres til senere når det registreres midler på tidspunktet for oppfyllelse.</span><span class="sxs-lookup"><span data-stu-id="60adc-185">Therefore, the authorization can be referenced later, when funds are captured at the time of fulfillment.</span></span> <span data-ttu-id="60adc-186">Denne autorisasjonen er unik for forretningsenheten, betalingskontakten og prosessoren.</span><span class="sxs-lookup"><span data-stu-id="60adc-186">This authorization is unique to the merchant, payment connector, and processor.</span></span> 

<span data-ttu-id="60adc-187">Hvis en ordre som ble opprettet elektronisk, blir hentet i butikken, må de samme betalingsdetaljene for denne ordren kalles tilbake og brukes.</span><span class="sxs-lookup"><span data-stu-id="60adc-187">If an order that was created online is being picked up in the store, the same payment details for that order must be recalled and used.</span></span> <span data-ttu-id="60adc-188">Når de opprinnelige detaljene leveres som en del av forespørselen om å registrere en betaling mot den opprinnelige autorisasjonen, vil betalingsbehandleren kunne behandle forespørselen og registrere betalingen.</span><span class="sxs-lookup"><span data-stu-id="60adc-188">When the original details are provided as part of the request to capture a payment against the original authorization, the payment processor will be able to handle the request and capture the payment.</span></span> 

<span data-ttu-id="60adc-189">Hvis det skal refereres til den elektroniske bestillingen på riktig måte, må også "kort finnes ikke"-betalingskontakten som støtter den samme prosessoren, være tilgjengelig.</span><span class="sxs-lookup"><span data-stu-id="60adc-189">To correctly reference the online order, a "card not present" payment connector that supports the same processor must also be available.</span></span> <span data-ttu-id="60adc-190">På denne måten kan POS-systemet ha én prosessor for "kort finnes" -betalinger, men den kan også ha tilgang til andre betalingskontakter, slik at de kan oppfylle ordrer som er opprettet i andre kanaler, ved å bruke ulike betalingsprosessorer.</span><span class="sxs-lookup"><span data-stu-id="60adc-190">In this way, the POS system can have one processor for "card present" payments, but it can also have access to other payment connectors so that it can fulfill orders that are created in other channels by using different payment processors.</span></span> 

## <a name="supported-scenarios"></a><span data-ttu-id="60adc-191">Scenarier som støttes</span><span class="sxs-lookup"><span data-stu-id="60adc-191">Supported scenarios</span></span>

<span data-ttu-id="60adc-192">Følgende omnikanalbetalingsscenarioer støttes:</span><span class="sxs-lookup"><span data-stu-id="60adc-192">The following omni-channel payment scenarios are supported:</span></span>

- <span data-ttu-id="60adc-193">Kjøpe på Internett og hente i butikk</span><span class="sxs-lookup"><span data-stu-id="60adc-193">Buy online, pick up in store</span></span>
- <span data-ttu-id="60adc-194">Bestille på telefonsenter og hente i butikk</span><span class="sxs-lookup"><span data-stu-id="60adc-194">Buy in call center, pick up in store</span></span>
- <span data-ttu-id="60adc-195">Kjøpe i butikk A og hente i butikk B</span><span class="sxs-lookup"><span data-stu-id="60adc-195">Buy in store A, pick up in store B</span></span>
- <span data-ttu-id="60adc-196">Kjøpe i butikk A, sende til kunde</span><span class="sxs-lookup"><span data-stu-id="60adc-196">Buy in store A, ship to customer</span></span>

    > [!NOTE]
    > <span data-ttu-id="60adc-197">Betalinger som er gjort i telefonsenteret som er tilordnet "Normal"-betalingsfunksjonen, må merkes med **Forskuddbetaling** = **Ja** for å bli reflektert i beløpet som forfaller ved tilbakekalling av ordren på salgsstedet.</span><span class="sxs-lookup"><span data-stu-id="60adc-197">Payments made in the call center that map to the "Normal" payment function must be marked as **Prepay** = **Yes** to be reflected in the amount due when recalling the order in the POS.</span></span> <span data-ttu-id="60adc-198">Ikke-forskuddsbetalinger av typen Normal gjenkjennes ikke når ordren kalles på nytt i POS.</span><span class="sxs-lookup"><span data-stu-id="60adc-198">Non-prepay payments of type "Normal" are not recognized when the order is recalled in POS.</span></span> 

<span data-ttu-id="60adc-199">Det er også støtte for variasjoner av disse scenariene.</span><span class="sxs-lookup"><span data-stu-id="60adc-199">Variations of these scenarios are also supported.</span></span> <span data-ttu-id="60adc-200">En elektronisk ordre kan for eksempel inneholde både linjer som skal sendes til kunden, og linjer som skal plukkes opp i en butikk.</span><span class="sxs-lookup"><span data-stu-id="60adc-200">For example, an online order might include both lines that will be shipped to the customer and lines that will be picked up in a store.</span></span> <span data-ttu-id="60adc-201">Alle ordreoppfyllingsalternativer støttes via omnikanalbetalinger.</span><span class="sxs-lookup"><span data-stu-id="60adc-201">All order fulfillment options are supported via omni-channel payments.</span></span> 

<span data-ttu-id="60adc-202">Følgende deler beskriver fremgangsmåten for hvert scenario og viser hvordan du kjører scenariet ved hjelp av demonstrasjonsdata.</span><span class="sxs-lookup"><span data-stu-id="60adc-202">The following sections describe the steps for each scenario and show how to run the scenario by using demo data.</span></span> 

### <a name="buy-online-pick-up-in-store"></a><span data-ttu-id="60adc-203">Kjøpe på Internett og hente i butikk</span><span class="sxs-lookup"><span data-stu-id="60adc-203">Buy online, pick up in store</span></span>

<span data-ttu-id="60adc-204">Før du starter må du kontrollere at følgende forutsetninger er oppfylt:</span><span class="sxs-lookup"><span data-stu-id="60adc-204">Before you start, make sure that the following prerequisites are in place:</span></span>

- <span data-ttu-id="60adc-205">Du har en referansebutikkfasade der Adyen-koblingen er konfigurert.</span><span class="sxs-lookup"><span data-stu-id="60adc-205">You have a reference storefront where the Adyen connector is configured.</span></span>
- <span data-ttu-id="60adc-206">Alternativet **Omnikanal-betalinger** på siden **Delte handelsparametere** er satt til **Sann**.</span><span class="sxs-lookup"><span data-stu-id="60adc-206">The **Omni-channel payments** option on the **Commerce shared parameters** page is set to **True**.</span></span> <span data-ttu-id="60adc-207">I senere versjoner er denne innstillingen flyttet til arbeidsområdet **Funksjonsbehandling**, der du kan velge funksjonen **Omnikanal-betalinger** og klikke på **Aktiver nå**.</span><span class="sxs-lookup"><span data-stu-id="60adc-207">In later versions this settng is moved to the **Feature Management** workspace where you can select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="60adc-208">Adyen-betalingskoblingen er konfigurert for Houston-salgsstedskassene.</span><span class="sxs-lookup"><span data-stu-id="60adc-208">The Adyen payment connector is configured for the Houston POS register.</span></span>
- <span data-ttu-id="60adc-209">Retail Modern POS for Windows eller Android med innebygd maskinvarestasjon -eller-</span><span class="sxs-lookup"><span data-stu-id="60adc-209">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="60adc-210">Modern POS for iOS eller Cloud POS med tilkoblet, delt maskinvarestasjon.</span><span class="sxs-lookup"><span data-stu-id="60adc-210">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

<span data-ttu-id="60adc-211">Følg disse trinnene for å kjøre scenarioet.</span><span class="sxs-lookup"><span data-stu-id="60adc-211">Follow these steps to run the scenario.</span></span>

1. <span data-ttu-id="60adc-212">I referansebutikkfasaden oppretter du en ordre for plukking i butikk.</span><span class="sxs-lookup"><span data-stu-id="60adc-212">In the reference storefront, create an order for in-store pickup.</span></span> <span data-ttu-id="60adc-213">Pass på at du velger **Houston**-butikken.</span><span class="sxs-lookup"><span data-stu-id="60adc-213">Be sure to select the **Houston** store.</span></span> 
2. <span data-ttu-id="60adc-214">Gå gjennom utsjekkingstrinnene, og betal ved hjelp av et testkredittkortnummer.</span><span class="sxs-lookup"><span data-stu-id="60adc-214">Go through the checkout steps, and pay by using a test credit card number.</span></span> <span data-ttu-id="60adc-215">Du kan finne testkredittkortnumre på siden for [Adyen-testkortnumre](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span><span class="sxs-lookup"><span data-stu-id="60adc-215">You can find test credit card numbers on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span></span>
3. <span data-ttu-id="60adc-216">I Commerce bruker du den satsvise jobben **Synkroniser ordrer** og **P-001**-distribusjonsplanen for å opprette ordrene i back office.</span><span class="sxs-lookup"><span data-stu-id="60adc-216">In Commerce, use the **Synchronize orders** batch job and the **P-001** distribution schedule to create the orders in the back office.</span></span>
4. <span data-ttu-id="60adc-217">På velkomstsiden for salgsstedet velger du **Ordrer som skal plukkes**-operasjonen for å se ordrene som skal hentes i butikken.</span><span class="sxs-lookup"><span data-stu-id="60adc-217">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
5. <span data-ttu-id="60adc-218">Velg én eller flere linjer fra ordren som ble opprettet i referansebutikkfasaden, og velg deretter **Plukk**.</span><span class="sxs-lookup"><span data-stu-id="60adc-218">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="60adc-219">Ordren hentes fra back office.</span><span class="sxs-lookup"><span data-stu-id="60adc-219">The order is retrieved from the back office.</span></span> 

6. <span data-ttu-id="60adc-220">Når ordrelinjedetaljene hentes fra back office, og en kortbetaling som kan brukes for omnikanalen, oppdages, blir du informert om at en betalingsmåte er tilgjengelig.</span><span class="sxs-lookup"><span data-stu-id="60adc-220">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
7. <span data-ttu-id="60adc-221">Velg **Bruk tilgjengelige betalingsmåte** for å fullføre transaksjonen ved hjelp av kortopplysningene som ble angitt i referansebutikkfasaden.</span><span class="sxs-lookup"><span data-stu-id="60adc-221">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="60adc-222">Ordrelinjene lastes på transaksjonssiden, og forfalt saldo er 0 (null).</span><span class="sxs-lookup"><span data-stu-id="60adc-222">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span> 

8. <span data-ttu-id="60adc-223">Velg kategorien **Betalinger** for å vise betalingsmiddellinjen som ble trukket fra nettordren.</span><span class="sxs-lookup"><span data-stu-id="60adc-223">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
9. <span data-ttu-id="60adc-224">Velg en hvilken som helst betalingsmåte for å fullføre transaksjonen.</span><span class="sxs-lookup"><span data-stu-id="60adc-224">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-call-center-pick-up-in-store"></a><span data-ttu-id="60adc-225">Bestille på telefonsenter og hente i butikk</span><span class="sxs-lookup"><span data-stu-id="60adc-225">Buy in call center, pick up in store</span></span>

1. <span data-ttu-id="60adc-226">I Commerce, på siden **Kundeservice**, angir du **Karin Berg** i søkefeltet, og deretter velger **Søk**.</span><span class="sxs-lookup"><span data-stu-id="60adc-226">In Commerce, on the **Customer service** page, enter **Karen Berg** in the search bar, and then select **Search**.</span></span> 
3. <span data-ttu-id="60adc-227">Velg **Karin Berg** i søkeresultatene.</span><span class="sxs-lookup"><span data-stu-id="60adc-227">Select **Karen Berg** in the search results.</span></span>
4. <span data-ttu-id="60adc-228">Etter Karin er lastet inn på **Kundeservice**-siden, velger **Ny salgsordre**.</span><span class="sxs-lookup"><span data-stu-id="60adc-228">After Karen is loaded onto the **Customer service** page, select **New sales order**.</span></span>
5. <span data-ttu-id="60adc-229">Velg **Hode** på den nye salgsordresiden for å vise ordrehodet.</span><span class="sxs-lookup"><span data-stu-id="60adc-229">On the new sales order page, select **Header** to view the order header.</span></span> 
6. <span data-ttu-id="60adc-230">På **Ordrehode**-siden setter du området til **Sentralt** og lageret til **Houston**.</span><span class="sxs-lookup"><span data-stu-id="60adc-230">On the **Order header** page, set the site to **Central** and the warehouse to **Houston**.</span></span>
7. <span data-ttu-id="60adc-231">I kategorien **Lever** setter du **Leveringsmiddel**-feltet til **60** for kundehenting.</span><span class="sxs-lookup"><span data-stu-id="60adc-231">On the **Deliver** tab, set the **Mode of delivery** field to **60** for customer pickup.</span></span>
8. <span data-ttu-id="60adc-232">Velg **Linjer**, og legg deretter til én eller flere linjer i ordren.</span><span class="sxs-lookup"><span data-stu-id="60adc-232">Select **Lines**, and then add one or more lines to the order.</span></span> 
9. <span data-ttu-id="60adc-233">Velg **Fullført** for å angi flyten for fullføring av ordren.</span><span class="sxs-lookup"><span data-stu-id="60adc-233">Select **Complete** to enter the order completion flow.</span></span>
10. <span data-ttu-id="60adc-234">Rull ned til betalingsdelen, velg **Legg til**, og velg deretter en linje der betalingsmåtetypen er satt til **Kort**.</span><span class="sxs-lookup"><span data-stu-id="60adc-234">Scroll down to the payments section, select **Add**, and then select a line where the payment method type is set to **Cards**.</span></span> 
11. <span data-ttu-id="60adc-235">Velg plusstegnet (**+**) for å legge til en kortbetaling.</span><span class="sxs-lookup"><span data-stu-id="60adc-235">Select the plus sign (**+**) to add a card payment.</span></span> 
12. <span data-ttu-id="60adc-236">Angi detaljene for et testkredittkortnummer som du fant på siden for [Adyen-testkortnumre](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), og velg deretter **OK**.</span><span class="sxs-lookup"><span data-stu-id="60adc-236">Enter the details for a test credit card number that you found on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), and then select **OK**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="60adc-237">Hvis kortmerket for kortnummeret du har angitt, er forskjellig fra merket som ble valgt da betalingen ble initiert, vil betalingen fremdeles gå gjennom.</span><span class="sxs-lookup"><span data-stu-id="60adc-237">If the card brand for the card number that you entered differs from the brand that was selected when the payment was initiated, the payment will still go through.</span></span> <span data-ttu-id="60adc-238">Den posteres imidlertid til kontoene som er tilordnet til kortmerket du valgte i trinn 10.</span><span class="sxs-lookup"><span data-stu-id="60adc-238">However, it will be posted to the accounts that are mapped to the card brand that you selected in step 10.</span></span>

12. <span data-ttu-id="60adc-239">Velg **OK** på nytt for å lukke dialogboksen **Ordrefullføringsbetalinger**.</span><span class="sxs-lookup"><span data-stu-id="60adc-239">Select **OK** again to close the **Order completion payments** dialog box.</span></span>
13. <span data-ttu-id="60adc-240">Velg **Send** på siden **Salgsordresammendrag**.</span><span class="sxs-lookup"><span data-stu-id="60adc-240">On the **Sales order summary** page, select **Submit**.</span></span>
14. <span data-ttu-id="60adc-241">På velkomstsiden for salgsstedet velger du **Ordrer som skal plukkes**-operasjonen for å se ordrene som skal hentes i butikken.</span><span class="sxs-lookup"><span data-stu-id="60adc-241">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="60adc-242">Velg én eller flere linjer fra ordren som ble opprettet i referansebutikkfasaden, og velg deretter **Plukk**.</span><span class="sxs-lookup"><span data-stu-id="60adc-242">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="60adc-243">Ordren hentes fra back office.</span><span class="sxs-lookup"><span data-stu-id="60adc-243">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="60adc-244">Når ordrelinjedetaljene hentes fra back office, og en kortbetaling som kan brukes for omnikanalen, oppdages, blir du informert om at en betalingsmåte er tilgjengelig.</span><span class="sxs-lookup"><span data-stu-id="60adc-244">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="60adc-245">Velg **Bruk tilgjengelige betalingsmåte** for å fullføre transaksjonen ved hjelp av kortopplysningene som ble angitt i referansebutikkfasaden.</span><span class="sxs-lookup"><span data-stu-id="60adc-245">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="60adc-246">Ordrelinjene lastes på transaksjonssiden, og forfalt saldo er 0 (null).</span><span class="sxs-lookup"><span data-stu-id="60adc-246">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="60adc-247">Velg kategorien **Betalinger** for å vise betalingsmiddellinjen som ble trukket fra nettordren.</span><span class="sxs-lookup"><span data-stu-id="60adc-247">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="60adc-248">Velg en hvilken som helst betalingsmåte for å fullføre transaksjonen.</span><span class="sxs-lookup"><span data-stu-id="60adc-248">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-pick-up-in-store-b"></a><span data-ttu-id="60adc-249">Kjøpe i butikk A og hente i butikk B</span><span class="sxs-lookup"><span data-stu-id="60adc-249">Buy in store A, pick up in store B</span></span>

1. <span data-ttu-id="60adc-250">Start salgsstedet for Houston-butikken.</span><span class="sxs-lookup"><span data-stu-id="60adc-250">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="60adc-251">På **Transaksjon**-siden legger du til Karin Berg i transaksjonen ved å bruke det numeriske tastaturet for å angi **2001**.</span><span class="sxs-lookup"><span data-stu-id="60adc-251">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="60adc-252">Legg til én eller flere linjer i transaksjonen.</span><span class="sxs-lookup"><span data-stu-id="60adc-252">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="60adc-253">Velg **Ordrer** for å se ordrealternativene.</span><span class="sxs-lookup"><span data-stu-id="60adc-253">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="60adc-254">Velg **Plukk alle**, og deretter, når du blir bedt om det, velger du **Kundeordre**.</span><span class="sxs-lookup"><span data-stu-id="60adc-254">Select **Pick up all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="60adc-255">I søkefeltet angir du **Seattle**, og deretter velger du **Seattle**-butikken for plukking.</span><span class="sxs-lookup"><span data-stu-id="60adc-255">In the search bar, enter **Seattle**, and then select the **Seattle** store for pickup.</span></span> 
7. <span data-ttu-id="60adc-256">Velg **OK** for å godta gjeldende dato som hentedato.</span><span class="sxs-lookup"><span data-stu-id="60adc-256">Select **OK** to accept the current date as the date of pickup.</span></span>
9. <span data-ttu-id="60adc-257">Velg **Betal med kort** for å starte betalingen.</span><span class="sxs-lookup"><span data-stu-id="60adc-257">Select **Pay card** to initiate the payment.</span></span>
10. <span data-ttu-id="60adc-258">Tilby kortbetalingen for beløpet som forfaller for innbetalingen.</span><span class="sxs-lookup"><span data-stu-id="60adc-258">Tender the card payment for the amount that is due for the deposit.</span></span> 
11. <span data-ttu-id="60adc-259">Fullfør innbetalingen på betalingsterminalen.</span><span class="sxs-lookup"><span data-stu-id="60adc-259">Complete the deposit payment on the payment terminal.</span></span> 
12. <span data-ttu-id="60adc-260">Når betalingen er utført, velger du alternativet for å bruke det samme kortet for oppfyllelsen, og vent til ordren er fullført.</span><span class="sxs-lookup"><span data-stu-id="60adc-260">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span> 
13. <span data-ttu-id="60adc-261">Start salgsstedet for Seattle-butikken.</span><span class="sxs-lookup"><span data-stu-id="60adc-261">Start the POS for the Seattle store.</span></span>
14. <span data-ttu-id="60adc-262">På velkomstsiden for salgsstedet velger du **Ordrer som skal plukkes**-operasjonen for å se ordrene som skal hentes i butikken.</span><span class="sxs-lookup"><span data-stu-id="60adc-262">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="60adc-263">Velg én eller flere linjer fra ordren som ble opprettet i referansebutikkfasaden, og velg deretter **Plukk**.</span><span class="sxs-lookup"><span data-stu-id="60adc-263">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="60adc-264">Ordren hentes fra back office.</span><span class="sxs-lookup"><span data-stu-id="60adc-264">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="60adc-265">Når ordrelinjedetaljene hentes fra back office, og en kortbetaling som kan brukes for omnikanalen, oppdages, blir du informert om at en betalingsmåte er tilgjengelig.</span><span class="sxs-lookup"><span data-stu-id="60adc-265">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="60adc-266">Velg **Bruk tilgjengelige betalingsmåte** for å fullføre transaksjonen ved hjelp av kortopplysningene som ble angitt i referansebutikkfasaden.</span><span class="sxs-lookup"><span data-stu-id="60adc-266">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="60adc-267">Ordrelinjene lastes på transaksjonssiden, og forfalt saldo er 0 (null).</span><span class="sxs-lookup"><span data-stu-id="60adc-267">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="60adc-268">Velg kategorien **Betalinger** for å vise betalingsmiddellinjen som ble trukket fra nettordren.</span><span class="sxs-lookup"><span data-stu-id="60adc-268">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="60adc-269">Velg en hvilken som helst betalingsmåte for å fullføre transaksjonen.</span><span class="sxs-lookup"><span data-stu-id="60adc-269">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-ship-to-customer"></a><span data-ttu-id="60adc-270">Kjøpe i butikk A, sende til kunde</span><span class="sxs-lookup"><span data-stu-id="60adc-270">Buy in store A, ship to customer</span></span>

1. <span data-ttu-id="60adc-271">Start salgsstedet for Houston-butikken.</span><span class="sxs-lookup"><span data-stu-id="60adc-271">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="60adc-272">På **Transaksjon**-siden legger du til Karin Berg i transaksjonen ved å bruke det numeriske tastaturet for å angi **2001**.</span><span class="sxs-lookup"><span data-stu-id="60adc-272">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="60adc-273">Legg til én eller flere linjer i transaksjonen.</span><span class="sxs-lookup"><span data-stu-id="60adc-273">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="60adc-274">Velg **Ordrer** for å se ordrealternativene.</span><span class="sxs-lookup"><span data-stu-id="60adc-274">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="60adc-275">Velg **Send alle**, og deretter, når du blir bedt om det, velger du **Kundeordre**.</span><span class="sxs-lookup"><span data-stu-id="60adc-275">Select **Ship all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="60adc-276">På leveringsmåtesiden velger du **Standard over natten**, og deretter **OK** for å godta dagens dato som forsendelsesdato.</span><span class="sxs-lookup"><span data-stu-id="60adc-276">In the shipping method page, select **Standard overnight**, and then select **OK** to accept today's date as the shipping date.</span></span> 
7. <span data-ttu-id="60adc-277">Velg **OK** for å godta gjeldende dato som hentedato.</span><span class="sxs-lookup"><span data-stu-id="60adc-277">Select **OK** to accept the current date as the date of pickup.</span></span>
8. <span data-ttu-id="60adc-278">Velg **Betal med kort** for å starte betalingen.</span><span class="sxs-lookup"><span data-stu-id="60adc-278">Select **Pay card** to initiate the payment.</span></span>
9. <span data-ttu-id="60adc-279">Tilby kortbetalingen for beløpet som forfaller for innbetalingen.</span><span class="sxs-lookup"><span data-stu-id="60adc-279">Tender the card payment for the amount that is due for the deposit.</span></span> 
10. <span data-ttu-id="60adc-280">Fullfør innbetalingen på betalingsterminalen.</span><span class="sxs-lookup"><span data-stu-id="60adc-280">Complete the deposit payment on the payment terminal.</span></span> 
11. <span data-ttu-id="60adc-281">Når betalingen er utført, velger du alternativet for å bruke det samme kortet for oppfyllelsen, og vent til ordren er fullført.</span><span class="sxs-lookup"><span data-stu-id="60adc-281">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span>

<span data-ttu-id="60adc-282">Når ordren plukkes, pakkes og faktureres i back office, vil betalingsdetaljene som gis på salgsstedet, bli brukt til å registrere midlene for varene som sendes til kunden.</span><span class="sxs-lookup"><span data-stu-id="60adc-282">When the order is picked, packed, and invoiced in the back office, the payment details that are provided at the POS will be used to capture the funds for the goods that are being shipped to the customer.</span></span> 

## <a name="scenario-details"></a><span data-ttu-id="60adc-283">Scenariodetaljer</span><span class="sxs-lookup"><span data-stu-id="60adc-283">Scenario details</span></span>

<span data-ttu-id="60adc-284">I tillegg til de grunnleggende scenariene som akkurat ble beskrevet, er det gjort flere forbedringer i betalings-SDKen for å støtte omnikanalbetalinger.</span><span class="sxs-lookup"><span data-stu-id="60adc-284">In addition to the basic scenarios that were just described, several enhancements have been made to the Payments SDK to support omni-channel payments.</span></span> 

### <a name="pos"></a><span data-ttu-id="60adc-285">Salgssted</span><span class="sxs-lookup"><span data-stu-id="60adc-285">POS</span></span>

#### <a name="single-swipedip-for-customer-orders"></a><span data-ttu-id="60adc-286">Enkelt sveip/innsetting for kundeordrer</span><span class="sxs-lookup"><span data-stu-id="60adc-286">Single swipe/dip for customer orders</span></span>

<span data-ttu-id="60adc-287">Før omnikanalfunksjonen ble implementert, da kundeordrer som inkluderte innskudd, ble opprettet på salgsstedet, måtte kundene dra (eller sette inn) kortet to ganger: én gang for å betale og én gang for å tokenisere kortet for etterfølgende ordreoppfyllelse.</span><span class="sxs-lookup"><span data-stu-id="60adc-287">Before the omni-channel payments feature was implemented, when customer orders that included deposits were created at the POS, customers were required to swipe (or dip) their card two times: one time to pay the deposit and one time to tokenize the card for subsequent order fulfillment.</span></span> <span data-ttu-id="60adc-288">Når funksjonen for omnikanaltokenisering er aktivert, må kundene bare dra kort kortet én gang for å både å utføre betalingen og autorisere beløpet som er skyldig for varer som skal oppfylles senere.</span><span class="sxs-lookup"><span data-stu-id="60adc-288">When the omni-channel tokenization feature is turned on, customers must swipe their card only one time to both pay the deposit and authorize the amount that is due for goods that will be fulfilled later.</span></span> <span data-ttu-id="60adc-289">På tidspunktet for oppfyllelse registreres de autoriserte midlene.</span><span class="sxs-lookup"><span data-stu-id="60adc-289">At the time of fulfillment, the authorized funds are captured.</span></span> <span data-ttu-id="60adc-290">Før funksjonen for omnikanaltokenisering ble implementert, ble bare et gjentakende korttoken opprettet for etterfølgende ordreoppfyllelse.</span><span class="sxs-lookup"><span data-stu-id="60adc-290">Before the omni-channel tokenization feature was implemented, only a recurring card token was created for subsequent order fulfillment.</span></span> <span data-ttu-id="60adc-291">Derfor ble ikke midlene for den ventende oppfyllelsen godkjent, og fordi disse midlene ikke ble holdt for det bestemte kjøpet, var det mindre sannsynlig at de ble registrert senere.</span><span class="sxs-lookup"><span data-stu-id="60adc-291">Therefore, the funds for the pending fulfillment weren't authorized, and because those funds weren't being held for that specific purchase, it was less likely that they could be captured later.</span></span>

> [!NOTE]
> <span data-ttu-id="60adc-292">Enkelt sveip støttes ikke i Retail versjon 8.1.3.</span><span class="sxs-lookup"><span data-stu-id="60adc-292">Single swipe isn't supported in Retail version 8.1.3.</span></span> <span data-ttu-id="60adc-293">Kundeordrer i versjon 8.1.3 bruker samme flyt som ble brukt før funksjonen for omnikanaltokenisering ble implementert.</span><span class="sxs-lookup"><span data-stu-id="60adc-293">Customer orders in version 8.1.3 use the same flow that was used before the omni-channel tokenization feature was implemented.</span></span> 

### <a name="cards-that-cant-issue-recurring-card-tokens"></a><span data-ttu-id="60adc-294">Kort som ikke kan utstede gjentakende korttokener</span><span class="sxs-lookup"><span data-stu-id="60adc-294">Cards that can't issue recurring card tokens</span></span>

<span data-ttu-id="60adc-295">Enkelte kort kan ikke brukes til omnikanalbetalinger fordi de ikke støtter utstedelse av regelmessige korttokener.</span><span class="sxs-lookup"><span data-stu-id="60adc-295">Some cards can't be used for omni-channel payments, because they don't support issuing recurring card tokens.</span></span> <span data-ttu-id="60adc-296">Når en ordre opprettes på salgsstedet, brukes den forrige korttokeniseringsflyten hvis innbetalingen betales ved hjelp av et kort som ikke støtter gjentakende korttokener.</span><span class="sxs-lookup"><span data-stu-id="60adc-296">When an order is created at the POS, if the deposit is paid by using a card that doesn't support recurring card tokens, the previous card tokenization flow is used.</span></span> <span data-ttu-id="60adc-297">Derfor må en kunde som ønsker å oppgi en betaling som skal brukes til etterfølgende ordreoppfyllelse, presentere et ekstra kort.</span><span class="sxs-lookup"><span data-stu-id="60adc-297">Therefore, a customer who wants to provide a payment that will be used for subsequent order fulfillment must present a second card.</span></span> <span data-ttu-id="60adc-298">Hvis det andre kortet ikke støtter gjentakende korttokener, vil tokeniseringshandlingen bli avslått, og kassereren blir bedt om å be kunden oppgi et annet kort.</span><span class="sxs-lookup"><span data-stu-id="60adc-298">If the second card doesn't support recurring card tokens, the tokenization action will be declined, and the cashier will be prompted to ask the customer to provide a different card.</span></span> 

### <a name="using-a-different-card"></a><span data-ttu-id="60adc-299">Bruke et annet kort</span><span class="sxs-lookup"><span data-stu-id="60adc-299">Using a different card</span></span>

<span data-ttu-id="60adc-300">En kunde som kommer til butikken for ordreplukking, har muligheten til å bruke et annet kort.</span><span class="sxs-lookup"><span data-stu-id="60adc-300">A customer who comes to the store for order pickup has the option to use a different card.</span></span> <span data-ttu-id="60adc-301">Når kassereren mottar meldingen **Bruk tilgjengelig betalingsmåte** når ordren plukkes, kan han eller hun spørre om kunden ønsker å bruke det samme kortet.</span><span class="sxs-lookup"><span data-stu-id="60adc-301">When the cashier receives the **Use available payment method** prompt at the time of order pickup, he or she can ask whether the customer wants to use the same card.</span></span> <span data-ttu-id="60adc-302">Hvis kunden har mistet kortet som ble brukt til å opprette ordren, og vil betale for ordren ved å bruke et annet kort, kan kassereren velge **Bruk en annen betalingsmåte**.</span><span class="sxs-lookup"><span data-stu-id="60adc-302">If the customer has lost the card that was used to create the order and wants to pay for the order by using a different card, the cashier can select **Use a different payment method**.</span></span> <span data-ttu-id="60adc-303">Hvis kunden senere kommer tilbake for å hente flere varer for den samme ordren, og hvis den opprinnelige kortautorisasjonen fremdeles er gyldig, kan kassereren på nytt spørre om kunden ønsker å bruke dette kortet.</span><span class="sxs-lookup"><span data-stu-id="60adc-303">If the customer comes back later to pick up more items for the same order, if the original card authorization is still valid, the cashier can again ask whether the customer wants to use that card.</span></span>

### <a name="invalid-authorizations"></a><span data-ttu-id="60adc-304">Ugyldige godkjenninger</span><span class="sxs-lookup"><span data-stu-id="60adc-304">Invalid authorizations</span></span>

<span data-ttu-id="60adc-305">Hvis kortet som ble brukt til å opprette en ordre, ikke lenger er gyldig når produktene velges for plukking, vil betalingsregistreringsforespørselen mislykkes.</span><span class="sxs-lookup"><span data-stu-id="60adc-305">If the card that was used to create an order is no longer valid, when products are selected for pickup, the payment capture request will fail.</span></span> <span data-ttu-id="60adc-306">Salgsstedbetalingskoblingen vil deretter prøve å opprette en ny autorisasjon og registrere ved hjelp av samme kortdetaljer.</span><span class="sxs-lookup"><span data-stu-id="60adc-306">The POS payment connector will then try to create a new authorization and capture by using the same card details.</span></span> <span data-ttu-id="60adc-307">Hvis den nye godkjenningen eller registreringen mislykkes, vil kassereren bli informert om at betalingen ikke kan behandles.</span><span class="sxs-lookup"><span data-stu-id="60adc-307">If the new authorization or capture fails, the cashier will be informed that the payment could not be processed.</span></span> <span data-ttu-id="60adc-308">Kassereren må deretter få en ny betaling fra kunden.</span><span class="sxs-lookup"><span data-stu-id="60adc-308">The cashier must then get a new payment from the customer.</span></span> 

### <a name="multiple-available-payments"></a><span data-ttu-id="60adc-309">Flere tilgjengelige betalinger</span><span class="sxs-lookup"><span data-stu-id="60adc-309">Multiple available payments</span></span>

<span data-ttu-id="60adc-310">Når en ordre som har flere betalingsmidler og flere linjer, blir plukket, mottar kassereren meldingen **Bruk tilgjengelig betalingsmåte**.</span><span class="sxs-lookup"><span data-stu-id="60adc-310">When an order that has multiple tenders and multiple lines is picked up, the cashier first receives the **Use available payment method** prompt.</span></span> <span data-ttu-id="60adc-311">Hvis det finnes flere kort når kassereren velger **Bruk tilgjengelige betalingsmåte**, vil de eksisterende betalingsmiddellinjene registreres til saldoen er oppfylt for varene som blir plukket for øyeblikket.</span><span class="sxs-lookup"><span data-stu-id="60adc-311">If there are multiple cards, when the cashier selects **Use available payment method**, existing card tender lines will be captured until the balance is met for the goods that are currently being picked up.</span></span> <span data-ttu-id="60adc-312">Kassereren har ikke mulighet til å velge kortet som skal brukes for varene som blir plukket.</span><span class="sxs-lookup"><span data-stu-id="60adc-312">The cashier won't have the option to select the card that should be used for the goods that are being picked up.</span></span> 

## <a name="related-topics"></a><span data-ttu-id="60adc-313">Relaterte emner</span><span class="sxs-lookup"><span data-stu-id="60adc-313">Related topics</span></span>

- [<span data-ttu-id="60adc-314">Vanlige spørsmål om betalinger</span><span class="sxs-lookup"><span data-stu-id="60adc-314">Payments FAQ</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/payments-retail)
- [<span data-ttu-id="60adc-315">Dynamics 365 Payment Connector for Adyen</span><span class="sxs-lookup"><span data-stu-id="60adc-315">Dynamics 365 Payment Connector for Adyen</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3)
- [<span data-ttu-id="60adc-316">Konfigurere BOPIS i et evalueringsmiljø for Dynamics 365 Commerce</span><span class="sxs-lookup"><span data-stu-id="60adc-316">Configure BOPIS in a Dynamics 365 Commerce evaluation environment</span></span>](https://docs.microsoft.com/dynamics365/commerce/cpe-bopis)

