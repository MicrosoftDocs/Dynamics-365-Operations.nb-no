---
title: Kryssfirmadatakilder i elektronisk rapportering
description: Dette emnet forklarer hvordan du kan bruke kryssfirmadatakilder i elektronisk rapportering (ER).
author: NickSelin
manager: AnnBe
ms.date: 05/25/2018
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-platform
ms.technology: 
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 220314
ms.assetid: 2685df16-5ec8-4fd7-9495-c0f653e82567
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-04-01
ms.dyn365.ops.version: Release 8.0
ms.translationtype: HT
ms.sourcegitcommit: 2fc887668171175d436b9eb281a35c1c9d089591
ms.openlocfilehash: 7f0f78d15e99397d61c3abace197cf1281d3769f
ms.contentlocale: nb-no
ms.lasthandoff: 05/25/2018

---

# <a name="cross-company-data-sources-in-electronic-reporting"></a><span data-ttu-id="818b9-103">Kryssfirmadatakilder i elektronisk rapportering</span><span class="sxs-lookup"><span data-stu-id="818b9-103">Cross-company data sources in Electronic reporting</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="818b9-104">Du kan utforme elektronisk rapportering (ER)-formater for å generere utgående dokumenter i forskjellige formater.</span><span class="sxs-lookup"><span data-stu-id="818b9-104">You can design Electronic reporting (ER) formats to generate outgoing documents in various formats.</span></span> <span data-ttu-id="818b9-105">Når et dokument genereres, kaller et ER-format datakilder som ble konfigurert i en tilsvarende ER-modelltilordning.</span><span class="sxs-lookup"><span data-stu-id="818b9-105">When a document is generated, an ER format calls data sources that were configured in a corresponding ER model mapping.</span></span> <span data-ttu-id="818b9-106">Hvis du vil konfigurere tilgang til programtabellene for henting av poster, kan du bruke ER-datakilder av typen **Tabellposter**.</span><span class="sxs-lookup"><span data-stu-id="818b9-106">To configure access to application tables for record retrieval, you can use ER data sources of the **Table records** type.</span></span> <span data-ttu-id="818b9-107">Når tilgangstabellen er en delt tabell (det vil si en tabell hvor dataene lagres uten en firma-ID), returnerer denne datakilden alle poster.</span><span class="sxs-lookup"><span data-stu-id="818b9-107">When the accessing table is a shared table (that is, a table where data is saved without a company identifier), this data source returns all records.</span></span> <span data-ttu-id="818b9-108">Når tilgangstabellen er en firmaavhengig tabell (det vil si en tabell hvor dataene lagres per firma), vil denne datakilden returnere bare postene som er lagret for det gjeldende firmaet (det vil si firmakonteksten som ER-formatet kjører under).</span><span class="sxs-lookup"><span data-stu-id="818b9-108">When the accessing table is a company-dependent table (that is, a table where data is saved per company), this data source returns only the records that have been saved for the current company (that is, the company context that the ER format is running under).</span></span>

<span data-ttu-id="818b9-109">Hver datakilde av **Tabellposter**-typen i en modelltilordning kan nå merkes som en kryssfirmadatakilde.</span><span class="sxs-lookup"><span data-stu-id="818b9-109">Every data source of the **Table records** type in a model mapping can be now marked as a cross-company data source.</span></span> <span data-ttu-id="818b9-110">Derfor kan du bruke datakilder av typen **Tabellposter** til å få tilgang til kryssfirmadata i programtabeller.</span><span class="sxs-lookup"><span data-stu-id="818b9-110">Therefore, you can use data sources of the **Table records** type to access cross-company data in application tables.</span></span> 

<span data-ttu-id="818b9-111">Hvis du merker en datakilde som kryssfirma, skjer følgende:</span><span class="sxs-lookup"><span data-stu-id="818b9-111">If you mark a data source as cross-company, the following behavior occurs:</span></span>

- <span data-ttu-id="818b9-112">For en datakilde som refererer til en delt tabell unntatt CompanyInfo, returnerer datakilden alle poster som finnes i referansetabellen.</span><span class="sxs-lookup"><span data-stu-id="818b9-112">For a data source that refers to any shared table except CompanyInfo, the data source returns all records that exist in the referenced table.</span></span> 
- <span data-ttu-id="818b9-113">For en datakilde som refererer til tabellen CompanyInfo, selv om CompanyInfo er en delt tabell, returnerer datakilden postene som inneholder identifikatoren for et firma fra det definerte området.</span><span class="sxs-lookup"><span data-stu-id="818b9-113">For a data source that refers to the CompanyInfo table, even though CompanyInfo is a shared table, the data source returns the records that contain the identifier of a company from the defined scope.</span></span>
- <span data-ttu-id="818b9-114">For alle firmaavhengige tabeller returnerer datakilden postene i den refererte tabellen som inneholder identifikatoren for et firma fra det definerte området.</span><span class="sxs-lookup"><span data-stu-id="818b9-114">For any company-dependent table, the data source returns the records of the referenced table that contain the identifier of a company from the defined scope.</span></span>

<span data-ttu-id="818b9-115">I dialogboksen for systemspørringen, når **Be om spørring** er aktivert for alle datakilder som er merket som kryssfirma, kan du manuelt velge ett eller flere firmaer som skal tas med i **Firmaområde**-kategorien.</span><span class="sxs-lookup"><span data-stu-id="818b9-115">In the system query dialog box, when the **Ask for query** option is turned on for any data source that is marked as cross-company, you can manually select one or more companies to include on the **Company range** tab.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="818b9-116">På samme måte som andre filtre beholdes firmafilteret som en sist brukt-verdi for spørringer når du kjører et ER-format.</span><span class="sxs-lookup"><span data-stu-id="818b9-116">Like other filters, the company filter is persisted as a last-used value for queries when you run an ER format.</span></span> <span data-ttu-id="818b9-117">Filteret endres ikke automatisk hvis du endrer kryssfirmaverdien for en datakilde.</span><span class="sxs-lookup"><span data-stu-id="818b9-117">The filter isn't automatically changed if you change the cross-company value for a data source.</span></span> <span data-ttu-id="818b9-118">Du bruker en annen kryssfirmaverdi for en annen datakilde ved å slette tilsvarende brukerspesifikke valg.</span><span class="sxs-lookup"><span data-stu-id="818b9-118">To use a different cross-company value for another data source, delete the corresponding user-specific selection.</span></span>

<span data-ttu-id="818b9-119">For hver datakilde som er merket som kryssfirma, kan du velge postene du vil bruke, ved hjelp av **FILTER**- og **WHERE**-funksjoner i ER-uttrykk.</span><span class="sxs-lookup"><span data-stu-id="818b9-119">For every data source that is marked as cross-company, you can select the records that you want by using the **FILTER** and **WHERE** functions in ER expressions.</span></span> <span data-ttu-id="818b9-120">**DataAreaID**-feltet kan også brukes som en firma-ID.</span><span class="sxs-lookup"><span data-stu-id="818b9-120">The **dataAreaID** field can also be used as a company identifier.</span></span> <span data-ttu-id="818b9-121">For øyeblikket er **dataAreaID**-feltet begrenset til følgende typer betingelser når **FILTER**-funksjonen brukes:</span><span class="sxs-lookup"><span data-stu-id="818b9-121">Currently, the **dataAreaID** field is limited to the following types of conditions when the **FILTER** function is used:</span></span> 

- <span data-ttu-id="818b9-122">Bare betingelser med én **dataAreaID**-feltsammenligning støttes.</span><span class="sxs-lookup"><span data-stu-id="818b9-122">Only conditions that have a single **dataAreaID** field comparison are supported.</span></span>
- <span data-ttu-id="818b9-123">Bare sammenligninger med uttrykk som ikke avhenger av postlisteelementer, er tillatt.</span><span class="sxs-lookup"><span data-stu-id="818b9-123">Only comparisons that have expressions that don't depend on records list items are allowed.</span></span>

<span data-ttu-id="818b9-124">Derfor er følgende uttrykk gyldig.</span><span class="sxs-lookup"><span data-stu-id="818b9-124">Therefore, the following expression is valid.</span></span>

    FILTER (MyTable, MyTable.dataAreaID = $StringUserInputParameter)
    While shown below expressions will not pass the validation:
    FILTER (MyTable, MyTable.dataAreaID = MyTable2RecordsList.MyField)
    FILTER (MyTable, 
        OR(
            MyTable.dataAreaID = $StringUserInputParameter1,
            MyTable.dataAreaID = $StringUserInputParameter2
        )
    )

<span data-ttu-id="818b9-125">Som standard omfatter området alle selskaper i gjeldende program.</span><span class="sxs-lookup"><span data-stu-id="818b9-125">By default, the scope includes all companies of the current application.</span></span> <span data-ttu-id="818b9-126">Det kan imidlertid være begrenset.</span><span class="sxs-lookup"><span data-stu-id="818b9-126">However, it can be restricted.</span></span> <span data-ttu-id="818b9-127">Hvis du vil begrense omfanget av kryssfirmadatatilgang for et enkelt ER-format, kan du tilordne et bestemt organisasjonshierarki til formatet.</span><span class="sxs-lookup"><span data-stu-id="818b9-127">To restrict the scope of cross-company data access for a single ER format, assign a specific organization hierarchy to the format.</span></span> <span data-ttu-id="818b9-128">Når et hierarki er definert for et ER-format, returneres bare poster for juridiske enheter som vises i det tilordnede hierarkiet, selv om formatet kaller kryssfirmadatakilder.</span><span class="sxs-lookup"><span data-stu-id="818b9-128">When a hierarchy is defined for an ER format, only records for legal entities that are presented in the assigned hierarchy are returned, even though the format calls cross-company data sources.</span></span> <span data-ttu-id="818b9-129">Når en referanse til et hierarki som ikke lenger finnes, er definert for et ER-format, brukes standardomfanget, og formatet kaller kryssfirmadatakilder.</span><span class="sxs-lookup"><span data-stu-id="818b9-129">When a reference to a hierarchy that no longer exists is defined for an ER format, the default scope is applied, and the format calls cross-company data sources.</span></span> <span data-ttu-id="818b9-130">I dette tilfellet returneres poster for alle programfirmaer.</span><span class="sxs-lookup"><span data-stu-id="818b9-130">In this situation, records for all application companies are returned.</span></span> 

<span data-ttu-id="818b9-131">Legg merke til at når **Bruk utkast**-alternativet er aktivert for den tilordnede til et enkelt ER-formatorganisasjonshierarki, brukes de juridiske enhetene fra kladdeversjonen av dette hierarkiet til å identifisere området for kryssfirmadatakilder.</span><span class="sxs-lookup"><span data-stu-id="818b9-131">Note that when the **Use draft** option is turned on for the assigned to a single ER format organization hierarchy, the legal entities from the draft version of this hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="818b9-132">Hvis kladdeversjonen ikke finnes, brukes de juridiske enhetene fra den siste publiserte versjonen av dette organisasjonshierarkiet for denne.</span><span class="sxs-lookup"><span data-stu-id="818b9-132">If the draft version does not exist, the legal entities from the last published version of this organization hierarchy will be used for this.</span></span>

<span data-ttu-id="818b9-133">Legg merke til at når **Bruk utkast**-alternativet er deaktivert for den tilordnede til et enkelt ER-formatorganisasjonshierarki, brukes de juridiske enhetene fra den sist publiserte versjonen av dette organisasjonshierarkiet til å identifisere området for kryssfirmadatakilder.</span><span class="sxs-lookup"><span data-stu-id="818b9-133">Note that when the **Use draft** option is turned off for the assigned to a single ER format organization hierarchy, the legal entities from the last published version of this organization hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="818b9-134">Gyldig dato for organisasjonshierarkier støttes ikke ennå i ER-rammeverket.</span><span class="sxs-lookup"><span data-stu-id="818b9-134">Date effectiveness of organization hierarchies is not supported yet in the ER framework.</span></span>

<span data-ttu-id="818b9-135">Hierarkiet kan tilordnes til et format på en bestemt side som kan åpnes fra ER-arbeidsområdet, eller ved hjelp av **Organisasjonsstyring -> Elektronisk rapportering -> Filter for juridisk enhet for formater**-menyelementet.</span><span class="sxs-lookup"><span data-stu-id="818b9-135">The hierarchy can be assigned to a format in a specific page that can be accessed from the ER workspace or by using the **Organization administration -> Electronic reporting -> Legal entity filter for formats** menu item.</span></span> <span data-ttu-id="818b9-136">For å få tilgang til siden må rettigheten **Vedlikehold filtre for juridisk enhet for formater** (ERMaintainFormatMappingLegalEntityFilters) gis til en bruker.</span><span class="sxs-lookup"><span data-stu-id="818b9-136">To access the page, the **Maintain legal entity filters for format** privilege (ERMaintainFormatMappingLegalEntityFilters) must be granted to a user.</span></span> <span data-ttu-id="818b9-137">Omfangsbegrensningen i hierarkibaserte juridiske enheter for formatet brukes i tillegg til begrensningen som brukeren kan angi manuelt i dialogboksen for systemspørringen.</span><span class="sxs-lookup"><span data-stu-id="818b9-137">The scope restriction of hierarchy-based legal entities for the format is applied in addition to the restriction that the user can manually specify in the system query dialog box.</span></span> <span data-ttu-id="818b9-138">Skjæringspunktet mellom disse begrensningene blir brukt når formatet kjøres.</span><span class="sxs-lookup"><span data-stu-id="818b9-138">The intersection of these restrictions is used when the format is run.</span></span>

<span data-ttu-id="818b9-139">Hvis du vil vite mer om denne funksjonen, spiller du av oppgaveveiledningen **ER Få tilgang til poster for firmaavhengige tabeller i kryssfirmamodus**, som er en del av 7.5.4.3 Anskaffe/utvikle komponenter for IT-tjeneste/-løsning (10677), og kan være lastet ned fra [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684).</span><span class="sxs-lookup"><span data-stu-id="818b9-139">To learn more about this feature, play the task guide, **ER Access records of company dependent tables in cross-company mode**, which is part of the 7.5.4.3 Acquire/Develop IT service/solution components (10677) business process, and can be downloaded from the [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684).</span></span> <span data-ttu-id="818b9-140">Denne oppgaveveiledning hjelper deg med å konfigurere en ER-modelltilordning og ER-format for å få tilgang til programtabeller i kryssfirmamodus.</span><span class="sxs-lookup"><span data-stu-id="818b9-140">This task guide walks you through the process of configuring an ER model mapping and ER format to access application tables in cross-company mode.</span></span>

<span data-ttu-id="818b9-141">Last ned følgende filer for å fullføre oppgaveveiledning:</span><span class="sxs-lookup"><span data-stu-id="818b9-141">Download the following files to complete the task guide:</span></span>

- [<span data-ttu-id="818b9-142">ER-modellkonfigurasjon - CrossCompanyDataAccessModel.xml</span><span class="sxs-lookup"><span data-stu-id="818b9-142">ER model configuration - CrossCompanyDataAccessModel.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)
- [<span data-ttu-id="818b9-143">ER-formatkonfigurasjon - CrossCompanyDataAccessFormat.xml</span><span class="sxs-lookup"><span data-stu-id="818b9-143">ER format configuration - CrossCompanyDataAccessFormat.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)

