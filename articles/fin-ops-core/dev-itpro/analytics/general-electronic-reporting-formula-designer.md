---
title: Formeldesigner i elektronisk rapportering (ER)
description: Dette emnet gir generell informasjon om hvordan du bruker formeldesigneren i elektronisk rapportering.
author: NickSelin
ms.date: 12/05/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERDataModelDesigner, ERExpressionDesignerFormula, ERMappedFormatDesigner, ERModelMappingDesigner
audience: Application User, IT Pro
ms.reviewer: kfend
ms.custom: 58771
ms.assetid: 24223e13-727a-4be6-a22d-4d427f504ac9
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 2dcede0818630329a5608c2d294c9c9f4f749f13
ms.sourcegitcommit: 074b6e212d19dd5d84881d1cdd096611a18c207f
ms.translationtype: HT
ms.contentlocale: nb-NO
ms.lasthandoff: 03/31/2021
ms.locfileid: "5750138"
---
# <a name="formula-designer-in-electronic-reporting-er"></a><span data-ttu-id="a2a81-103">Formeldesigner i elektronisk rapportering (ER)</span><span class="sxs-lookup"><span data-stu-id="a2a81-103">Formula designer in Electronic reporting (ER)</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="a2a81-104">Dette emnet beskriver hvordan du bruker formeldesigneren i elektronisk rapportering (ER).</span><span class="sxs-lookup"><span data-stu-id="a2a81-104">This topic explains how to use the formula designer in Electronic reporting (ER).</span></span> <span data-ttu-id="a2a81-105">Når du utformer et format for et bestemt elektronisk dokument i ER, kan du bruke formler for å transformere data slik at de oppfyller kravene for fullføringen og formatering for dokumentet.</span><span class="sxs-lookup"><span data-stu-id="a2a81-105">When you design a format for a specific electronic document in ER, you can use formulas to transform data so that it meets the requirements for the document's fulfillment and formatting.</span></span> <span data-ttu-id="a2a81-106">Disse formlene ligner på formler i Microsoft Excel.</span><span class="sxs-lookup"><span data-stu-id="a2a81-106">These formulas resemble formulas in Microsoft Excel.</span></span> <span data-ttu-id="a2a81-107">Ulike typer funksjoner støttes i formlene: tekst, dato og klokkeslett, matematisk logiske, informasjon og konverteringsfunksjoner for datatype og andre domenespesifikke forretningsfunksjoner.</span><span class="sxs-lookup"><span data-stu-id="a2a81-107">Various types of functions are supported in the formulas: text, date and time, mathematical, logical, information, and data type conversion functions, and also other, business domain–specific functions.</span></span>

## <a name="formula-designer-overview"></a><span data-ttu-id="a2a81-108">Oversikt over formeldesigner</span><span class="sxs-lookup"><span data-stu-id="a2a81-108">Formula designer overview</span></span>

<span data-ttu-id="a2a81-109">ER støtter formeldesigneren.</span><span class="sxs-lookup"><span data-stu-id="a2a81-109">ER supports the formula designer.</span></span> <span data-ttu-id="a2a81-110">Under utformingen kan du derfor konfigurere uttrykk som kan brukes til følgende oppgaver ved kjøretid:</span><span class="sxs-lookup"><span data-stu-id="a2a81-110">Therefore, at design time, you can configure expressions that can be used for the following tasks at runtime:</span></span>

- <span data-ttu-id="a2a81-111">Transformere data som er mottatt fra en programdatabase, og som skal angis i en ER-datamodell som er utformet for å være en datakilde for ER-formater.</span><span class="sxs-lookup"><span data-stu-id="a2a81-111">Transform data that is received from an application database and that should be entered in an ER data model that is designed to be a data source for ER formats.</span></span> <span data-ttu-id="a2a81-112">(Disse transformasjonene kan for eksempel inneholde filtrering, gruppering og datatypekonvertering.)</span><span class="sxs-lookup"><span data-stu-id="a2a81-112">(For example, these transformations might include filtering, grouping, and data type conversion.)</span></span>
- <span data-ttu-id="a2a81-113">Formater data som må sendes til et genererende elektronisk dokumentet i henhold til oppsettet og betingelsene for et bestemt ER-format.</span><span class="sxs-lookup"><span data-stu-id="a2a81-113">Format data that must be sent to a generating electronic document in accordance with the layout and conditions of a specific ER format.</span></span> <span data-ttu-id="a2a81-114">(Formatering kan for eksempel gjøres i samsvar med angitt språk eller kultur, eller koding).</span><span class="sxs-lookup"><span data-stu-id="a2a81-114">(For example, the formatting might be done in accordance with the requested language or culture, or the encoding).</span></span>
- <span data-ttu-id="a2a81-115">Kontroller opprettingen av elektroniske dokumenter.</span><span class="sxs-lookup"><span data-stu-id="a2a81-115">Control the process of creating electronic documents.</span></span> <span data-ttu-id="a2a81-116">(For eksempel uttrykkene kan aktivere eller deaktivere utdataene for bestemte elementer i formatet, avhengig av behandling av data.</span><span class="sxs-lookup"><span data-stu-id="a2a81-116">(For example, the expressions can enable or disable the output of specific elements of the format, depending on processing data.</span></span> <span data-ttu-id="a2a81-117">De kan også avbryte opprettingen av dokumentet eller vise meldinger til brukere.)</span><span class="sxs-lookup"><span data-stu-id="a2a81-117">They can also interrupt the document creation process or throw messages to users.)</span></span>

<span data-ttu-id="a2a81-118">Du kan åpne **Formeldesigner**-siden når du utfører følgende handlinger:</span><span class="sxs-lookup"><span data-stu-id="a2a81-118">You can open the **Formula designer** page when you perform any of the following actions:</span></span>

- <span data-ttu-id="a2a81-119">Binder datakileelementer til datamodellkomponenter.</span><span class="sxs-lookup"><span data-stu-id="a2a81-119">Bind data source items to data model components.</span></span>
- <span data-ttu-id="a2a81-120">Binder datakileelementer til formatkomponenter.</span><span class="sxs-lookup"><span data-stu-id="a2a81-120">Bind data source items to format components.</span></span>
- <span data-ttu-id="a2a81-121">Utfører vedlikehold av beregnede felt som er del av datakilder.</span><span class="sxs-lookup"><span data-stu-id="a2a81-121">Complete maintenance of calculated fields that are part of data sources.</span></span>
- <span data-ttu-id="a2a81-122">Definerer synlighetsbetingelsene for inndataparametere for brukere.</span><span class="sxs-lookup"><span data-stu-id="a2a81-122">Define the visibility conditions for user input parameters.</span></span>
- <span data-ttu-id="a2a81-123">Utformer et formats transformasjoner.</span><span class="sxs-lookup"><span data-stu-id="a2a81-123">Design a format's transformations.</span></span>
- <span data-ttu-id="a2a81-124">Definerer aktiveringen av betingelser for formatets komponenter.</span><span class="sxs-lookup"><span data-stu-id="a2a81-124">Define the enabling conditions for the format's components.</span></span>
- <span data-ttu-id="a2a81-125">Definerer filnavn for formatets FILE-komponenter.</span><span class="sxs-lookup"><span data-stu-id="a2a81-125">Define the file names for the format's FILE components.</span></span>
- <span data-ttu-id="a2a81-126">Definerer betingelsene for prosesskontrollvalideringer.</span><span class="sxs-lookup"><span data-stu-id="a2a81-126">Define the conditions for process control validations.</span></span>
- <span data-ttu-id="a2a81-127">Definerer meldingsteksten for prosesskontrollvalideringer.</span><span class="sxs-lookup"><span data-stu-id="a2a81-127">Define the message text for process control validations.</span></span>

## <a name="data-binding"></a><a name="Binding"></a><span data-ttu-id="a2a81-128">Databinding</span><span class="sxs-lookup"><span data-stu-id="a2a81-128">Data binding</span></span>

<span data-ttu-id="a2a81-129">ER-formeldesigneren kan brukes til å definere et uttrykk som transformerer data som mottas fra datakilder, slik at dataene kan angis i dataforbruker på følgende måter ved kjøretid:</span><span class="sxs-lookup"><span data-stu-id="a2a81-129">The ER formula designer can be used to define an expression that transforms data that is received from data sources, so that the data can be entered in the data consumer in the following ways at runtime:</span></span>

- <span data-ttu-id="a2a81-130">Fra programdatakilder og kjøretidsparametere til en ER-datamodellen</span><span class="sxs-lookup"><span data-stu-id="a2a81-130">From application data sources and runtime parameters to an ER data model</span></span>
- <span data-ttu-id="a2a81-131">Fra en ER-datamodell til et ER-format</span><span class="sxs-lookup"><span data-stu-id="a2a81-131">From an ER data model to an ER format</span></span>
- <span data-ttu-id="a2a81-132">Fra programdatakilder og kjøretidsparametere til et ER-format</span><span class="sxs-lookup"><span data-stu-id="a2a81-132">From application data sources and runtime parameters to an ER format</span></span>

<span data-ttu-id="a2a81-133">Illustrasjonen nedenfor viser utformingen av et uttrykk av denne typen.</span><span class="sxs-lookup"><span data-stu-id="a2a81-133">The following illustration shows the design of an expression of this type.</span></span> <span data-ttu-id="a2a81-134">I dette eksemplet avrunder uttrykket verdien for **Intrastat.AmountMST**-feltet for Intrastat-tabellen til to desimalplasser og returnerer deretter den avrundede verdien.</span><span class="sxs-lookup"><span data-stu-id="a2a81-134">In this example, the expression rounds the value of the **Intrastat.AmountMST** field in the Intrastat table to two decimal places and then returns the rounded value.</span></span>

<span data-ttu-id="a2a81-135">[![Databindingsuttrykk](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span><span class="sxs-lookup"><span data-stu-id="a2a81-135">[![Data binding expression](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span></span>

<span data-ttu-id="a2a81-136">Illustrasjonen nedenfor viser hvordan et uttrykk av denne typen kan brukes.</span><span class="sxs-lookup"><span data-stu-id="a2a81-136">The following illustration shows how an expression of this type can be used.</span></span> <span data-ttu-id="a2a81-137">I dette eksemplet er resultatet av det utformede uttrykket angitt i **Transaction.InvoicedAmount**-komponenten for datamodellen **Avgiftsrapporteringsmodell**.</span><span class="sxs-lookup"><span data-stu-id="a2a81-137">In this example, the result of the designed expression is entered in the **Transaction.InvoicedAmount** component of the **Tax reporting model** data model.</span></span>

<span data-ttu-id="a2a81-138">[![Databindingsuttrykk som brukes](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span><span class="sxs-lookup"><span data-stu-id="a2a81-138">[![Data binding expression being used](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span></span>

<span data-ttu-id="a2a81-139">Under kjøringen avrunder den utformede formelen `ROUND (Intrastat.AmountMST, 2)`, verdien i **AmountMST**-feltet for hver post i Intrastat-tabellen til to desimalplasser.</span><span class="sxs-lookup"><span data-stu-id="a2a81-139">At runtime, the designed formula, `ROUND (Intrastat.AmountMST, 2)`, rounds the value of the **AmountMST** field for each record in the Intrastat table to two decimal places.</span></span> <span data-ttu-id="a2a81-140">Den angir så den avrundede verdien i **Transaction.InvoicedAmount**-komponenten i **Avgiftsrapportering**-datamodellen.</span><span class="sxs-lookup"><span data-stu-id="a2a81-140">It then enters the rounded value in the **Transaction.InvoicedAmount** component of the **Tax reporting** data model.</span></span>

## <a name="data-formatting"></a><a name="Transformation"></a><span data-ttu-id="a2a81-141">Dataformatering</span><span class="sxs-lookup"><span data-stu-id="a2a81-141">Data formatting</span></span>

<span data-ttu-id="a2a81-142">ER-formeldesigneren kan brukes til å definere et uttrykk som formaterer data som mottas fra datakilder, slik at dataene kan sendes som en del av det genererende elektroniske dokumentet.</span><span class="sxs-lookup"><span data-stu-id="a2a81-142">The ER formula designer can be used to define an expression that formats data that is received from data sources, so that the data can be sent as part of the generating electronic document.</span></span> <span data-ttu-id="a2a81-143">Du kan ha formatering som må brukes som en vanlig regel som skal brukes på nytt for et format.</span><span class="sxs-lookup"><span data-stu-id="a2a81-143">You might have formatting that must be applied as a typical rule that should be reused for a format.</span></span> <span data-ttu-id="a2a81-144">I så fall kan du innføre denne formateringen én gang i formatkonfigurasjonen, som en navngitt transformasjon som har et formateringsuttrykk.</span><span class="sxs-lookup"><span data-stu-id="a2a81-144">In this case, you can introduce that formatting one time in the format configuration, as a named transformation that has a formatting expression.</span></span> <span data-ttu-id="a2a81-145">Denne navngitte transformasjonen kan deretter knyttes til mange formatkomponenter der utdata må formateres i henhold til formateringsuttrykket som du opprettet.</span><span class="sxs-lookup"><span data-stu-id="a2a81-145">This named transformation can then be linked to many format components where the output must be formatted according to the formatting expression that you created.</span></span>

<span data-ttu-id="a2a81-146">Illustrasjonen nedenfor viser utformingen av en transformasjon av denne typen.</span><span class="sxs-lookup"><span data-stu-id="a2a81-146">The following illustration shows the design of a transformation of this type.</span></span> <span data-ttu-id="a2a81-147">I dette eksemplet forkorter **TrimmedString**-transformasjonen innkommende data for *String*-datatypen ved å fjerne innledende og etterfølgende mellomrom.</span><span class="sxs-lookup"><span data-stu-id="a2a81-147">In this example, the **TrimmedString** transformation truncates incoming data of the *String* data type by removing leading and trailing spaces.</span></span> <span data-ttu-id="a2a81-148">Det returnerer deretter den avkortede strengverdien.</span><span class="sxs-lookup"><span data-stu-id="a2a81-148">It then returns the truncated string value.</span></span>

<span data-ttu-id="a2a81-149">[![Transformasjon](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span><span class="sxs-lookup"><span data-stu-id="a2a81-149">[![Transformation](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span></span>

<span data-ttu-id="a2a81-150">Illustrasjonen nedenfor viser hvordan en transformasjon av denne typen kan brukes.</span><span class="sxs-lookup"><span data-stu-id="a2a81-150">The following illustration shows how a transformation of this type can be used.</span></span> <span data-ttu-id="a2a81-151">I dette eksemplet sender flere formatkomponenter tekst som utdata til det genererende elektroniske dokumentet under kjøring.</span><span class="sxs-lookup"><span data-stu-id="a2a81-151">In this example, several format components send text as output to the generating electronic document at runtime.</span></span> <span data-ttu-id="a2a81-152">Alle disse formatkomponentene refererer til **TrimmedString**-transformeringen etter navn.</span><span class="sxs-lookup"><span data-stu-id="a2a81-152">All these format components refer to the **TrimmedString** transformation by name.</span></span>

<span data-ttu-id="a2a81-153">[![Transformasjon som brukes](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span><span class="sxs-lookup"><span data-stu-id="a2a81-153">[![Transformation being used](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span></span>

<span data-ttu-id="a2a81-154">Når formatkomponenter som **partyName**-komponenten i den forrige illustrasjonen refererer til **TrimmedString**-transformasjonen, sender transformasjonen tekst som utdata til det genererende elektroniske dokumentet.</span><span class="sxs-lookup"><span data-stu-id="a2a81-154">When format components, such as the **partyName** component in the preceding illustration, refer to the **TrimmedString** transformation, the transformation sends text as output to the generating electronic document.</span></span> <span data-ttu-id="a2a81-155">Denne teksten inneholder ikke mellomrom.</span><span class="sxs-lookup"><span data-stu-id="a2a81-155">This text doesn't include leading and trailing spaces.</span></span>

<span data-ttu-id="a2a81-156">Hvis du har en formatering som skal brukes individuelt, kan du introdusere denne formateringen som et individuelt uttrykk for binding av en bestemt formatkomponent.</span><span class="sxs-lookup"><span data-stu-id="a2a81-156">If you have formatting that must be applied individually, you can introduce that formatting as an individual expression of a binding of a specific format component.</span></span> <span data-ttu-id="a2a81-157">Illustrasjonen nedenfor viser et uttrykk av denne typen.</span><span class="sxs-lookup"><span data-stu-id="a2a81-157">The following illustration shows an expression of this type.</span></span> <span data-ttu-id="a2a81-158">I dette eksemplet er **partyType**-formatkomponenten bundet til datakilden via et uttrykk som konverterer innkommende data fra **Model.Company.RegistrationType**-feltet i datakilden til store bokstaver i tekst.</span><span class="sxs-lookup"><span data-stu-id="a2a81-158">In this example, the **partyType** format component is bound to the data source via an expression that converts incoming data from the **Model.Company.RegistrationType** field in the data source to uppercase text.</span></span> <span data-ttu-id="a2a81-159">Uttrykket sender deretter teksten som utdata til det elektroniske dokumentet.</span><span class="sxs-lookup"><span data-stu-id="a2a81-159">The expression then sends that text as output to the electronic document.</span></span>

<span data-ttu-id="a2a81-160">[![Bruke formatering på en individuell komponent](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span><span class="sxs-lookup"><span data-stu-id="a2a81-160">[![Applying formatting to an individual component](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span></span>

## <a name="process-flow-control"></a><a name="Validation"></a><span data-ttu-id="a2a81-161">Prosessflytkontroll</span><span class="sxs-lookup"><span data-stu-id="a2a81-161">Process flow control</span></span>

<span data-ttu-id="a2a81-162">ER-formeldesigneren kan brukes til å definere uttrykk som styrer prosessflyten for generering av elektroniske dokumenter.</span><span class="sxs-lookup"><span data-stu-id="a2a81-162">The ER formula designer can be used to define expressions that control the process flow of generating electronic documents.</span></span> <span data-ttu-id="a2a81-163">Du kan utføre følgende oppgaver:</span><span class="sxs-lookup"><span data-stu-id="a2a81-163">You can perform the following tasks:</span></span>

- <span data-ttu-id="a2a81-164">Definere betingelser som avgjør når en prosess for oppretting av dokument må stoppes.</span><span class="sxs-lookup"><span data-stu-id="a2a81-164">Define conditions that determine when a document creation process must be stopped.</span></span>
- <span data-ttu-id="a2a81-165">Angi uttrykk som oppretter meldinger for brukeren om stoppede prosesser eller vise kjøringsloggmeldinger om å fortsette prosessen for rapportgenerering.</span><span class="sxs-lookup"><span data-stu-id="a2a81-165">Specify expressions that either create messages for the user about stopped processes or throw execution log messages about the continuing process of report generation.</span></span>
- <span data-ttu-id="a2a81-166">Angi filnavnene for generering av elektroniske dokumenter, og kontroller betingelsene de oppretter.</span><span class="sxs-lookup"><span data-stu-id="a2a81-166">Specify the file names of generating electronic documents, and control the conditions of their creation.</span></span>

<span data-ttu-id="a2a81-167">Hver regel av prosessflytkontrollen er utviklet som en enkelt validering.</span><span class="sxs-lookup"><span data-stu-id="a2a81-167">Each rule of the process flow control is designed as an individual validation.</span></span> <span data-ttu-id="a2a81-168">Illustrasjonen nedenfor viser en validering av denne typen.</span><span class="sxs-lookup"><span data-stu-id="a2a81-168">The following illustration shows a validation of this type.</span></span> <span data-ttu-id="a2a81-169">Her er en forklaring på konfigurasjonen i dette eksemplet:</span><span class="sxs-lookup"><span data-stu-id="a2a81-169">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="a2a81-170">Valideringen blir evaluert når **INSTAT**-noden er opprettet under genereringen av XML-filen.</span><span class="sxs-lookup"><span data-stu-id="a2a81-170">The validation is evaluated when the **INSTAT** node is created during generation of the XML file.</span></span>
- <span data-ttu-id="a2a81-171">Hvis listen over transaksjoner er tom, stopper valideringen kjøringsprosessen og returnerer **USANN**.</span><span class="sxs-lookup"><span data-stu-id="a2a81-171">If the list of transactions is empty, the validation stops the execution process and returns **FALSE**.</span></span>
- <span data-ttu-id="a2a81-172">Valideringen returnerer en feilmelding som inneholder teksten for etiketten SYS70894 på brukerens foretrukne språk.</span><span class="sxs-lookup"><span data-stu-id="a2a81-172">The validation returns an error message that includes the text of label SYS70894 in the user's preferred language.</span></span>

<span data-ttu-id="a2a81-173">[![Validering](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span><span class="sxs-lookup"><span data-stu-id="a2a81-173">[![Validation](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span></span>

<span data-ttu-id="a2a81-174">ER-formeldesigner kan også brukes til å generere et filnavn for et genererende elektroniske dokument og kontrollere prosessen for oppretting av fil.</span><span class="sxs-lookup"><span data-stu-id="a2a81-174">The ER formula designer can also be used to generate a file name for a generating electronic document and to control the file creation process.</span></span> <span data-ttu-id="a2a81-175">Illustrasjonen nedenfor viser utformingen av en prosessflytkontroll av denne typen.</span><span class="sxs-lookup"><span data-stu-id="a2a81-175">The following illustration shows the design of a process flow control of this type.</span></span> <span data-ttu-id="a2a81-176">Her er en forklaring på konfigurasjonen i dette eksemplet:</span><span class="sxs-lookup"><span data-stu-id="a2a81-176">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="a2a81-177">Listen med poster fra **modell. Intrastat**-datakilden er delt inn i partier.</span><span class="sxs-lookup"><span data-stu-id="a2a81-177">The list of records from the **model.Intrastat** data source is divided into batches.</span></span> <span data-ttu-id="a2a81-178">Hvert parti inneholder opptil 1 000 poster.</span><span class="sxs-lookup"><span data-stu-id="a2a81-178">Each batch contains up to 1,000 records.</span></span>
- <span data-ttu-id="a2a81-179">Utdataene oppretter en ZIP-fil som inneholder én fil i XML-format for hvert parti som ble opprettet.</span><span class="sxs-lookup"><span data-stu-id="a2a81-179">The output creates a zip file that contains one file in XML format for every batch that was created.</span></span>
- <span data-ttu-id="a2a81-180">Et uttrykk returnerer et filnavn for generering av elektroniske dokumenter ved å kjede sammen filnavnet og filnavntypen.</span><span class="sxs-lookup"><span data-stu-id="a2a81-180">An expression returns a file name for generating electronic documents by concatenating the file name and the file name extension.</span></span> <span data-ttu-id="a2a81-181">Filnavnet inneholder parti-ID-en som suffiks for det andre partiet og alle etterfølgende partier.</span><span class="sxs-lookup"><span data-stu-id="a2a81-181">For the second batch and all subsequent batches, the file name contains the batch ID as a suffix.</span></span>
- <span data-ttu-id="a2a81-182">Et uttrykk aktiverer (ved å returnere **SANN**) filopprettingsprosessen for partier som inneholder minst én post.</span><span class="sxs-lookup"><span data-stu-id="a2a81-182">An expression enables (by returning **TRUE**) the file creation process for batches that contain at least one record.</span></span>

<span data-ttu-id="a2a81-183">[![Prosessflytkontroll](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span><span class="sxs-lookup"><span data-stu-id="a2a81-183">[![Process flow control](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span></span>

## <a name="document-content-control"></a><a name="Enabled"></a><span data-ttu-id="a2a81-184">Kontroll av dokumentinnhold</span><span class="sxs-lookup"><span data-stu-id="a2a81-184">Document content control</span></span>

<span data-ttu-id="a2a81-185">ER-formeldesigneren kan brukes til å konfigurere uttrykk som kontrollerer hvilke data som skal plasseres i genererte, elektroniske dokumenter ved kjøring.</span><span class="sxs-lookup"><span data-stu-id="a2a81-185">The ER formula designer can be used to configure expressions that control what data will be put into generated electronic documents at runtime.</span></span> <span data-ttu-id="a2a81-186">Uttrykkene kan aktivere eller deaktivere utdataene for bestemte elementer i formatet, avhengig av behandling av data og konfigurert logikk.</span><span class="sxs-lookup"><span data-stu-id="a2a81-186">The expressions can enable or disable the output of specific elements of the format, depending on processing data and configured logic.</span></span> <span data-ttu-id="a2a81-187">Disse uttrykkene kan angis for ett enkelt formatelement i **Aktivert**-feltet i **Tilordning**-fanen på **Operasjonsutforming**-siden.</span><span class="sxs-lookup"><span data-stu-id="a2a81-187">These expressions can be entered for a single format element in the **Enabled** field on the **Mapping** tab of the **Operations designer** page.</span></span> <span data-ttu-id="a2a81-188">Du kan angi uttrykkene som en logisk betingelse som returnerer en *boolsk* verdi:</span><span class="sxs-lookup"><span data-stu-id="a2a81-188">You can enter the expressions as a logic condition that returns a *Boolean* value:</span></span>

- <span data-ttu-id="a2a81-189">Hvis betingelsen returnerer **Sann**, kjøres gjeldende formatelement.</span><span class="sxs-lookup"><span data-stu-id="a2a81-189">If the condition returns **True**, the current format element is run.</span></span>
- <span data-ttu-id="a2a81-190">Hvis betingelsen returnerer **Usann**, hoppes gjeldende formatelement over.</span><span class="sxs-lookup"><span data-stu-id="a2a81-190">If the condition returns **False**, the current format element is skipped.</span></span>

<span data-ttu-id="a2a81-191">Illustrasjonen nedenfor viser uttrykk av denne typen.</span><span class="sxs-lookup"><span data-stu-id="a2a81-191">The following illustration shows expressions of this type.</span></span> <span data-ttu-id="a2a81-192">(Versjon 11.12.11 av **ISO20022-kredittoverføring (NO)**-formatkonfigurasjon som leveres av Microsoft, brukes som et eksempel.) **XMLHeader**-formatkomponent er konfigurert til å beskrive strukturen i kredittoverføringsmeldingen i henhold til ISO 20022 XML-meldingsstandarder.</span><span class="sxs-lookup"><span data-stu-id="a2a81-192">(Version 11.12.11 of the **ISO20022 Credit transfer (NO)** format configuration that is provided by Microsoft is used as an example.) The **XMLHeader** format component is configured to describe the structure of the credit transfer message according to the ISO 20022 XML message standards.</span></span> <span data-ttu-id="a2a81-193">Formatkomponenten **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** er konfigurert til å legge til **Ustrd** XML-elementet i den genererte meldingen, og plassere remisseinformasjonen i et ustrukturert format som tekst i følgende XML-elementer:</span><span class="sxs-lookup"><span data-stu-id="a2a81-193">The **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** format component is configured to add the **Ustrd** XML element to the generated message and to put the remittance information in an unstructured format as text of the following XML elements:</span></span>

- <span data-ttu-id="a2a81-194">**PaymentNotes**-komponenten brukes til å produsere teksten i betalingsmerknadene.</span><span class="sxs-lookup"><span data-stu-id="a2a81-194">The **PaymentNotes** component is used to generate the text of payment notes.</span></span>
- <span data-ttu-id="a2a81-195">**DelimitedSequence**-komponenten produserer kommadelte fakturanumre som brukes til å utligne gjeldende kredittoverføring.</span><span class="sxs-lookup"><span data-stu-id="a2a81-195">The **DelimitedSequence** component generates comma-separated invoice numbers that are used to settle the current credit transfer.</span></span>

<span data-ttu-id="a2a81-196">[![PaymentNotes- og DelimitedSequence-komponenter](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span><span class="sxs-lookup"><span data-stu-id="a2a81-196">[![PaymentNotes and DelimitedSequence components](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span></span>

> [!NOTE]
> <span data-ttu-id="a2a81-197">**PaymentNotes**- og **DelimitedSequence**-komponentene merkes ved hjelp av et spørsmålstegn.</span><span class="sxs-lookup"><span data-stu-id="a2a81-197">The **PaymentNotes** and **DelimitedSequence** components are labeled by using a question mark.</span></span> <span data-ttu-id="a2a81-198">Et spørsmålstegn angir at bruken av en komponent er betinget.</span><span class="sxs-lookup"><span data-stu-id="a2a81-198">A question mark indicates that the use of a component is conditional.</span></span> <span data-ttu-id="a2a81-199">I dette tilfellet er bruk av komponentene basert på følgende kriterier:</span><span class="sxs-lookup"><span data-stu-id="a2a81-199">In this case, use of the components is based on the following criteria:</span></span>
>
> - <span data-ttu-id="a2a81-200">Uttrykket `@.PaymentsNotes <> ""` som er definert for **PaymentNotes**-komponenten, aktiverer (ved å returnere **SANN**) **Ustrd** XML-elementet til å bli fylt ut med to betalingsmerknader, hvis denne teksten ikke er tom for gjeldende kredittoverføring.</span><span class="sxs-lookup"><span data-stu-id="a2a81-200">The `@.PaymentsNotes <> ""` expression that is defined for the **PaymentNotes** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with the text of payment notes, if that text isn't blank for the current credit transfer.</span></span>
>
>    <span data-ttu-id="a2a81-201">[![Uttrykk for PaymentNotes-komponenten](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span><span class="sxs-lookup"><span data-stu-id="a2a81-201">[![Expression for the PaymentNotes component](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span></span>
>
> - <span data-ttu-id="a2a81-202">Uttrykket `@.PaymentsNotes = ""` som er definert for **DelimitedSequence**-komponenten, aktiverer (ved å returnere **SANN**) **Ustrd** XML-elementet til å bli fylt ut med en kommadelt liste over fakturanumre som brukes til å utligne gjeldende kredittoverføring, hvis teksten i betalingsmerknader for kredittoverføringen er tom.</span><span class="sxs-lookup"><span data-stu-id="a2a81-202">The `@.PaymentsNotes = ""` expression that is defined for the **DelimitedSequence** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with a comma-separated list of the invoice numbers that are used to settle the current credit transfer, if the text of payment notes for that credit transfer is blank.</span></span>
>
>    <span data-ttu-id="a2a81-203">[![Uttrykk for DelimitedSequence-komponenten](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span><span class="sxs-lookup"><span data-stu-id="a2a81-203">[![Expression for the DelimitedSequence component](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span></span>
> 
> <span data-ttu-id="a2a81-204">Basert på dette oppsettet vil den genererte meldingen for hver debitorbetaling, **Ustrd** XML-elementet, inneholde enten teksten for betalingsmerknader eller, når denne teksten er tom, en kommadelt liste over fakturanumre som brukes til å utligne betalingen.</span><span class="sxs-lookup"><span data-stu-id="a2a81-204">Based on this setup, the message that is generated for each debtor payment, the **Ustrd** XML element, will contain either the text of payment notes or, when that text is blank, a comma-separated list of the invoice numbers that are used to settle the payment.</span></span>

## <a name="validation-of-configured-formulas"></a><a name="TestFormula"></a><span data-ttu-id="a2a81-205">Validering av konfigurerte formler</span><span class="sxs-lookup"><span data-stu-id="a2a81-205">Validation of configured formulas</span></span>

<span data-ttu-id="a2a81-206">På **Formeldesigner**-siden velger du **Test** for å validere hvordan den konfigurerte formelen fungerer.</span><span class="sxs-lookup"><span data-stu-id="a2a81-206">On the **Formula designer** page, select **Test** to validate how the configured formula works.</span></span>

<span data-ttu-id="a2a81-207">[![Velge test for å validere en formel](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span><span class="sxs-lookup"><span data-stu-id="a2a81-207">[![Selecting Test to validate a forumula](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span></span>

<span data-ttu-id="a2a81-208">Når verdiene i formelargumenter er obligatoriske, kan du åpne dialogboksen **Testuttrykk** fra siden **Formeldesigner**.</span><span class="sxs-lookup"><span data-stu-id="a2a81-208">When the values of formula arguments are required, you can open the **Test expression** dialog box from the **Formula designer** page.</span></span> <span data-ttu-id="a2a81-209">I de fleste tilfeller må disse argumentene defineres manuelt fordi de konfigurerte bindingene ikke kjøres under utformingen.</span><span class="sxs-lookup"><span data-stu-id="a2a81-209">In most cases, these arguments must be manually defined, because the configured bindings aren't run at design time.</span></span> <span data-ttu-id="a2a81-210">Kategorien **Testresultat** på siden **Formel designer** viser resultatet fra utføringen av den konfigurerte formelen.</span><span class="sxs-lookup"><span data-stu-id="a2a81-210">The **Test result** tab on the **Formula designer** page shows the result from execution of the configured formula.</span></span>

<span data-ttu-id="a2a81-211">Følgende eksempel viser hvordan du kan teste formelen som er konfigurert for utenrikshandelsdomenet for å sikre at Intrastat-varekoden bare inneholder sifre.</span><span class="sxs-lookup"><span data-stu-id="a2a81-211">The following example shows how you can test the formula that is configured for the foreign trade domain to make sure that the Intrastat commodity code contains only digits.</span></span>

<span data-ttu-id="a2a81-212">Når du tester denne formelen, kan du bruke dialogboksen **Testutrykk** til å angi verdien for Intrastat-varekoden for testing.</span><span class="sxs-lookup"><span data-stu-id="a2a81-212">When you test this formula, you can use the **Test expression** dialog box to specify the value of the Intrastat commodity code for testing.</span></span>

<span data-ttu-id="a2a81-213">[![Angi Intrastat-varekoden for testing](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span><span class="sxs-lookup"><span data-stu-id="a2a81-213">[![Specifying the Intrastat commodity code for testing](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span></span>

<span data-ttu-id="a2a81-214">Når du har angitt Intrastat-varekoden og velger **OK**, viser kategorien **Testresultat** på siden **Formeldesigner** resultatet av utførelsen av den konfigurerte formelen.</span><span class="sxs-lookup"><span data-stu-id="a2a81-214">After you specify the Intrastat commodity code and select **OK**, the **Test result** tab on the **Formula designer** page shows the result of execution of the configured formula.</span></span> <span data-ttu-id="a2a81-215">Du kan deretter vurdere om resultatet er akseptabelt.</span><span class="sxs-lookup"><span data-stu-id="a2a81-215">You can then evaluate whether the result is acceptable.</span></span> <span data-ttu-id="a2a81-216">Hvis resultatet ikke er akseptabelt, kan du oppdatere formelen og teste den på nytt.</span><span class="sxs-lookup"><span data-stu-id="a2a81-216">If the result isn't acceptable, you can update the formula and test it again.</span></span>

<span data-ttu-id="a2a81-217">[![Testresultat](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span><span class="sxs-lookup"><span data-stu-id="a2a81-217">[![Test result](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span></span>

<span data-ttu-id="a2a81-218">Noen formler kan ikke testes på utformingstidspunktet.</span><span class="sxs-lookup"><span data-stu-id="a2a81-218">Some formulas can't be tested at design time.</span></span> <span data-ttu-id="a2a81-219">En formel kan for eksempel returnere et resultat av en datatype som ikke kan vises i kategorien **Testresultat.** I dette tilfellet får du en feilmelding som sier at formelen ikke kan testes.</span><span class="sxs-lookup"><span data-stu-id="a2a81-219">For example, a formula might return a result of a data type that can't be shown on the **Test result** tab. In this case, you receive an error message that states that the formula can't be tested.</span></span>

<span data-ttu-id="a2a81-220">[![Feilmelding](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span><span class="sxs-lookup"><span data-stu-id="a2a81-220">[![Error message](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="a2a81-221">Tilleggsressurser</span><span class="sxs-lookup"><span data-stu-id="a2a81-221">Additional resources</span></span>

- [<span data-ttu-id="a2a81-222">Oversikt over elektronisk rapportering</span><span class="sxs-lookup"><span data-stu-id="a2a81-222">Electronic Reporting overview</span></span>](general-electronic-reporting.md)
- [<span data-ttu-id="a2a81-223">Formelspråk i elektronisk rapportering</span><span class="sxs-lookup"><span data-stu-id="a2a81-223">Electronic reporting formula language</span></span>](er-formula-language.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]