---
title: Opprydding av ER-overføring
description: Dette emnet beskriver hvordan du kan bruke funksjonen for ER-overføringsopprydding til å løse problemer med ER-maler.
author: NickSelin
manager: AnnBe
ms.date: 04/29/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERSolutionTable, ERWorkspace, ERParameters, ERMigrationCleanup
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-01-01
ms.dyn365.ops.version: AX 8.0.0
ms.openlocfilehash: 090badd48785dfacf5942426d0fe53629f3c0cda
ms.sourcegitcommit: 5de75c61c33e57c813944f1ab6100aceb020d432
ms.translationtype: HT
ms.contentlocale: nb-NO
ms.lasthandoff: 04/29/2020
ms.locfileid: "3321808"
---
# <a name="er-migration-cleanup"></a><span data-ttu-id="91ea1-103">Opprydding av ER-overføring</span><span class="sxs-lookup"><span data-stu-id="91ea1-103">ER migration cleanup</span></span> 

[!include[banner](../includes/banner.md)]

<span data-ttu-id="91ea1-104">Når du administrerer dine Finance-forekomster, kan det hende du vil overføre gjeldende forekomst til en annen plassering.</span><span class="sxs-lookup"><span data-stu-id="91ea1-104">When you manage your Finance instances, you might decide to migrate your current instance to another location.</span></span> <span data-ttu-id="91ea1-105">Du kan for eksempel overføre produksjonsforekomsten til et nytt sandkassemiljø.</span><span class="sxs-lookup"><span data-stu-id="91ea1-105">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="91ea1-106">Hvis du har konfigurert ER-rammeverket (elektronisk rapportering) til å lagre maler i Microsoft Azure Blob Storage, refererer **DocuValue**-tabellen i det nye sandkassemiljøet til forekomsten av Blob Storage i produksjonsmiljøet.</span><span class="sxs-lookup"><span data-stu-id="91ea1-106">If you configured the Electronic reporting (ER) framework to store templates in Microsoft Azure Blob storage, the **DocuValue** table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="91ea1-107">Denne forekomsten er imidlertid ikke tilgjengelig fra sandkassemiljøet, fordi overføringsprosessen ikke støtter overføring av artefakter i Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="91ea1-107">However, this instance can't be accessed from the sandbox environment because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="91ea1-108">Det forventes imidlertid at du i det nye sandkassemiljøet refererer til forekomsten av BLOB Storage i sandkassemiljøet som ennå ikke henter ER-malene.</span><span class="sxs-lookup"><span data-stu-id="91ea1-108">Rather, it's expected that in the new sandbox environment, you refer to the instance of Blob storage in the sandbox environment that does not yet obtain the ER templates.</span></span>

<span data-ttu-id="91ea1-109">Hvis du prøver å kjøre et ER-format som bruker en mal til å generere forretningsdokumenter, oppstår det et unntak, og du blir varslet om den manglende malen.</span><span class="sxs-lookup"><span data-stu-id="91ea1-109">If you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="91ea1-110">Du blir også veiledet til å bruke alternativet for opprydding av ER-overføring til å slette og deretter importere ER-formatkonfigurasjonen som inneholder malen.</span><span class="sxs-lookup"><span data-stu-id="91ea1-110">You're also guided to use the ER migration cleanup option to delete and then re-import the ER format configuration that contains the template.</span></span>

<span data-ttu-id="91ea1-111">[![Kjøre et ER-format](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span><span class="sxs-lookup"><span data-stu-id="91ea1-111">[![Running an ER format](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span></span>

<span data-ttu-id="91ea1-112">Du får en lignende feil hvis du går til **Konfigurasjoner**-siden (**Organisasjonsstyring** \> **Elektronisk rapportering** \> **Konfigurasjoner**) og i konfigurasjonstreet prøver å slette en ER-formatkonfigurasjon som bruker en mal.</span><span class="sxs-lookup"><span data-stu-id="91ea1-112">You will receive a similar error if you navigate to the **Configurations** page (**Organization administration** \> **Electronic reporting** \> **Configurations**) and in the configurations tree, try to delete an ER format configuration that uses a template.</span></span>

<span data-ttu-id="91ea1-113">[![Slette et ER-format](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span><span class="sxs-lookup"><span data-stu-id="91ea1-113">[![Deletion an ER format](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span></span>

<span data-ttu-id="91ea1-114">Fullfør følgende fremgangsmåte for å løse problemer med ER-maler du ikke har tilgang til.</span><span class="sxs-lookup"><span data-stu-id="91ea1-114">Complete the following steps to resolve issues with ER templates that you are unable to access.</span></span>

1.  <span data-ttu-id="91ea1-115">Gå til siden **Organisasjonsstyring** \> **Periodisk** \> **Overføringsopprydding**-siden.</span><span class="sxs-lookup"><span data-stu-id="91ea1-115">Go to **Organization administration** \> **Periodic** \> **Migration cleanup** page.</span></span>
2.  <span data-ttu-id="91ea1-116">Velg en ER-formatkonfigurasjon som ikke kan utføres eller slettes.</span><span class="sxs-lookup"><span data-stu-id="91ea1-116">Select an ER format configuration that can’t be executed or deleted.</span></span>
3.  <span data-ttu-id="91ea1-117">Velg **Slett**.</span><span class="sxs-lookup"><span data-stu-id="91ea1-117">Select **Delete**.</span></span>
4.  <span data-ttu-id="91ea1-118">Bekreft slettingen av valgt ER-formatkonfigurasjon.</span><span class="sxs-lookup"><span data-stu-id="91ea1-118">Confirm the deletion of the selected ER format configuration.</span></span>
5.  <span data-ttu-id="91ea1-119">[Importer](download-electronic-reporting-configuration-lcs.md) den slettede ER-formatkonfigurasjonen til gjeldende Finance-forekomst.</span><span class="sxs-lookup"><span data-stu-id="91ea1-119">[Import](download-electronic-reporting-configuration-lcs.md) the deleted ER format configuration to the current Finance instance.</span></span>

## <a name="applicability"></a><span data-ttu-id="91ea1-120">Relevans</span><span class="sxs-lookup"><span data-stu-id="91ea1-120">Applicability</span></span>

> <span data-ttu-id="91ea1-121">[Viktig] **Overføringsopprydding** er bare målrettet for ER-formatkonfigurasjoner som inneholder ER-maler som ikke er tilgjengelige.</span><span class="sxs-lookup"><span data-stu-id="91ea1-121">[Important] The **Migration cleanup** option is targeted only for ER format configurations that contain non-accessible ER templates.</span></span> <span data-ttu-id="91ea1-122">Når du sletter en ER-formatkonfigurasjon ved å bruke alternativet **Overføringsopprydding**, sletter ER maler som er relatert til konfigurasjonsartefaktene i den eneste programdatabasen.</span><span class="sxs-lookup"><span data-stu-id="91ea1-122">When you delete an ER format configuration by using the **Migration cleanup** option, ER deletes the templates that are related to the configuration artifacts in the only application database.</span></span> <span data-ttu-id="91ea1-123">Eksistensen av de nødvendige fysiske filene i Blob Storage blir ikke validert.</span><span class="sxs-lookup"><span data-stu-id="91ea1-123">The existence of the appropriate physical files in Blob storage are not validated.</span></span> <span data-ttu-id="91ea1-124">I stedet antas det at det ikke finnes noen.</span><span class="sxs-lookup"><span data-stu-id="91ea1-124">Instead, it is assumed that there are none.</span></span> <span data-ttu-id="91ea1-125">Du må derfor ikke bruke alternativet for **Overføringsopprydding** som et alternativ til ER-konfigurasjonssletting på **Konfigurasjoner**-siden.</span><span class="sxs-lookup"><span data-stu-id="91ea1-125">Therefore, do not use the **Migration cleanup** option as an alternative to the ER configuration deletion option on the **Configurations** page.</span></span> <span data-ttu-id="91ea1-126">Bruk alternativet for **Overføringsopprydding** bare når ER-konfigurasjonssletting på **Konfigurasjoner**-siden mislykkes.</span><span class="sxs-lookup"><span data-stu-id="91ea1-126">Use the **Migration cleanup** option only when the ER configuration deletion option on the **Configurations** page failed.</span></span>
>
> <span data-ttu-id="91ea1-127">Hvis du bruker alternativet for **Overføringsopprydding** for å slette en ER-formatkonfigurasjon når den refererte malen er tilgjengelig i Blob Storage, sletter du bare relaterte konfigurasjonsartefakter i programdatabasen.</span><span class="sxs-lookup"><span data-stu-id="91ea1-127">If you use the **Migration cleanup** option to delete an ER format configuration when the referred template is available in the Blob storage, you only delete related configuration artifacts in the application database.</span></span> <span data-ttu-id="91ea1-128">Den fysiske filen for malen i Blob-lageret blir værende.</span><span class="sxs-lookup"><span data-stu-id="91ea1-128">The physical file of the template in the Blob storage remains.</span></span> <span data-ttu-id="91ea1-129">Filoverskriving i Blob Storage er ikke lenger tillatt.</span><span class="sxs-lookup"><span data-stu-id="91ea1-129">File overwriting in Blob storage is no longer allowed.</span></span> <span data-ttu-id="91ea1-130">Hvis du vil ha mer informasjon, kan du se [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217).</span><span class="sxs-lookup"><span data-stu-id="91ea1-130">For more information, see [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217).</span></span> <span data-ttu-id="91ea1-131">I tillegg vil du ikke lenger kunne importere konfigurasjonene som er slettet, på nytt ved hjelp av overføringsopprydding i dette miljøet.</span><span class="sxs-lookup"><span data-stu-id="91ea1-131">Additionally, you will no longer be able to re-import the configurations deleted by using the Migration cleanup in this environment.</span></span> <span data-ttu-id="91ea1-132">Hvis du vil løse dette problemet, må du finne den tilsvarende filen i Blob Storage og slette den manuelt.</span><span class="sxs-lookup"><span data-stu-id="91ea1-132">To resolve this issue, you need to find the corresponding file in Blob storage and manually delete it.</span></span>

<span data-ttu-id="91ea1-133">[![Importere et ER-format](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span><span class="sxs-lookup"><span data-stu-id="91ea1-133">[![Importing an ER format](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span></span>

<span data-ttu-id="91ea1-134">Det kan oppstå et lignende problem hvis du overfører programforekomsten til en annen plassering som er brukt som et overføringsmål mer enn én gang, og der BLOB Storage allerede inneholder ER-malfiler.</span><span class="sxs-lookup"><span data-stu-id="91ea1-134">A similar issue may occur if you migrate your application instance to another location that has been used as a migration target more than once and for which the Blob storage already contains ER template files.</span></span>

<span data-ttu-id="91ea1-135">Fordi du kan ha flere ER-formatkonfigurasjoner kan denne prosessen være tidkrevende.</span><span class="sxs-lookup"><span data-stu-id="91ea1-135">Because you can have several ER format configurations, this process can be time consuming.</span></span> <span data-ttu-id="91ea1-136">Derfor er bruk av funksjonen [Sikkerhetskopiere ER-maler](er-backup-storage-templates.md) til å gjenopprette maler med brutte referanser automatisk, foretrukket.</span><span class="sxs-lookup"><span data-stu-id="91ea1-136">Therefore, using the [Backup storage of ER templates](er-backup-storage-templates.md) feature to automatically recover templates with broken references is preferred.</span></span>
