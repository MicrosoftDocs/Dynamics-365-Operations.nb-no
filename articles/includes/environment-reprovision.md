<span data-ttu-id="9a7e4-101">Når du kopierer en database mellom miljøer, må du kjøre verktøyet for ny klargjøring av miljøet før den kopierte databasen kan tas i bruk, slik at alle Commerce-komponenter er oppdatert.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-101">When copying a database between environments, you will need to run the environment re-provisioning tool before the copied database is fully functional, to ensure that all Commerce components are up-to-date.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9a7e4-102">Vi anbefaler at du kjører denne prosedyren enten du bruker Commerce-komponenter eller ikke, fordi Commerce-funksjonalitet er inkludert i alle miljøer.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-102">We recommend that you run this procedure whether you are using Commerce components or not, because Commerce functionality is included in all environments.</span></span> 

<span data-ttu-id="9a7e4-103">Før du fortsetter, må du kontrollere at følgende forutsetninger er oppfylt:</span><span class="sxs-lookup"><span data-stu-id="9a7e4-103">Before you continue, you must make sure that the following prerequisites are met:</span></span>
1. <span data-ttu-id="9a7e4-104">Hvis du oppgraderer til juli 2017-utgivelsen 7.2.11792.56024 (også kalt 7.2), bruker du følgende X++-hurtigreparasjoner til programmet i målmiljøet før du kjører dataoppgraderingen i dette miljøet.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-104">If you are upgrading to the July 2017 release (also known as 7.2) 7.2.11792.56024, apply the following application X++ hotfixes in the destination environment before running the data upgrade in that environment.</span></span> <span data-ttu-id="9a7e4-105">Dette forhindrer at ulike feil oppstår under dataoppgraderingen:</span><span class="sxs-lookup"><span data-stu-id="9a7e4-105">These will prevent various errors occurring during the data upgrade:</span></span>

    - <span data-ttu-id="9a7e4-106">KB 4036156 – Mindre versjonsoppgradering for Retail – Variantnummerserie er ikke angitt.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-106">KB 4036156 - Retail minor version upgrade - 'Variant number sequence is not set.'</span></span> <span data-ttu-id="9a7e4-107">Denne reparasjonspakken inneholder også KB 4035399 og KB 4035751.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-107">This fix package also includes KB 4035399 and KB 4035751.</span></span> <span data-ttu-id="9a7e4-108">Vær oppmerksom på at du må ha minimum Platform Update 9 for å bruke denne pakken.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-108">Note that you must have a minimum of Platform Update 9 to use this package.</span></span> <span data-ttu-id="9a7e4-109">Hvis du er usikker, installerer du de nyeste binærfilene.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-109">If you are unsure, install the latest binaries.</span></span>
    
2. <span data-ttu-id="9a7e4-110">Hvis du oppgraderer fra Microsoft Dynamics AX 2012, installerer du følgende X++-reparasjoner til programmet i målmiljøet før du kjører dataoppgraderingen:</span><span class="sxs-lookup"><span data-stu-id="9a7e4-110">If you are upgrading from Microsoft Dynamics AX 2012, install the following application X++ fixes in the destination environment before you run the data upgrade:</span></span>
    - <span data-ttu-id="9a7e4-111">KB 4033183 – Dynamics AX 2012 R2- eller Dynamics AX 2012 R3 Pre-CU8-oppgraderingen for ikke-detaljhandel mislykkes med feilen Finner ikke objekt for dbo.RETAILTILLLAYOUTZONE.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-111">KB 4033183 - Dynamics AX 2012 R2 or Dynamics AX 2012 R3 Pre-CU8 non-retail upgrade fails with Object not found for dbo.RETAILTILLLAYOUTZONE.</span></span>
    - <span data-ttu-id="9a7e4-112">KB 4040692 – Oppgraderingen fra Dynamics AX 2012 R3 til Microsoft Dynamics 365 for Operations 7.2 mislykkes på grunn av duplisert indeks for RetailSalesLine på SalesLineIdx.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-112">KB 4040692 - Dynamics AX 2012 R3 to Microsoft Dynamics 365 for Operations 7.2 upgrade fails on RetailSalesLine duplicate index on SalesLineIdx.</span></span>
    - <span data-ttu-id="9a7e4-113">KB 4035490 – Ytelsesproblem med oppgraderingsskriptet til feltet GeneralJournalAccountEntry MainAccount.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-113">KB 4035490 - Performance issue with GeneralJournalAccountEntry MainAccount field upgrade script.</span></span>


<span data-ttu-id="9a7e4-114">Følg denne fremgangsmåten for å kjøre verktøyet for ny klargjøring av miljøet.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-114">Follow these steps to run the Environment reprovisioning tool.</span></span>

1. <span data-ttu-id="9a7e4-115">Velg **Distribuerbar programvarepakke** i Delt aktivabibliotek.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-115">In the Shared asset library, select **Software deployable package**.</span></span>
2. <span data-ttu-id="9a7e4-116">Last ned verktøyet for ny klargjøring av miljøet.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-116">Download the Environment reprovisioning tool.</span></span>
3. <span data-ttu-id="9a7e4-117">Velg **Distribuerbar programvarepakke** i aktivabiblioteket for prosjektet.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-117">In the asset library for your project, select **Software deployable package**.</span></span>
4. <span data-ttu-id="9a7e4-118">Velg **Ny** for å opprette en ny pakke.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-118">Select **New** to create a new package.</span></span>
5. <span data-ttu-id="9a7e4-119">Angi et navn og en beskrivelse for pakken.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-119">Enter a name and description for the package.</span></span> <span data-ttu-id="9a7e4-120">Du kan bruke **Verktøy for ny klargjøring av miljø** som pakkenavn.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-120">You can use **Environment reprovisioning tool** as the package name.</span></span>
6. <span data-ttu-id="9a7e4-121">Last opp pakken som du lastet ned tidligere.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-121">Upload the package that you downloaded earlier.</span></span>
7. <span data-ttu-id="9a7e4-122">Velg **Vedlikehold** > **Bruk oppdateringer** på siden **Miljødetaljer** for målmiljøet.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-122">On the **Environment details** page for your target environment, select **Maintain** > **Apply updates**.</span></span>
8. <span data-ttu-id="9a7e4-123">Velg verktøyet for ny klargjøring av miljø som du lastet opp tidligere, og velg deretter **Bruk** for å bruke pakken.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-123">Select the Environment reprovisioning tool that you uploaded earlier, and then select **Apply** to apply the package.</span></span>
9. <span data-ttu-id="9a7e4-124">Overvåk fremdriften for pakkedistribusjonen.</span><span class="sxs-lookup"><span data-stu-id="9a7e4-124">Monitor the progress of the package deployment.</span></span> 

<span data-ttu-id="9a7e4-125">Hvis du vil ha mer informasjon om hvordan du bruker en distribuerbar pakke, kan du se [Bruke en distribuerbar pakke](../deployment/create-apply-deployable-package.md).</span><span class="sxs-lookup"><span data-stu-id="9a7e4-125">For more information about how to apply a deployable package, see [Apply a deployable package](../deployment/create-apply-deployable-package.md).</span></span> <span data-ttu-id="9a7e4-126">Hvis du vil ha mer informasjon om hvordan du bruker en distribuerbar pakke manuelt, kan du se [Installere en distribuerbar pakke](../deployment/install-deployable-package.md).</span><span class="sxs-lookup"><span data-stu-id="9a7e4-126">For more information about how to manually apply a deployable package, see [Install a deployable package](../deployment/install-deployable-package.md).</span></span>
