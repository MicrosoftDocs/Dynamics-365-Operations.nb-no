---
title: Oppryddingsjobb for lagerstyringsposter
description: Dette emnet beskriver oppryddingsjobben for lageroppføringer, som bidrar til å forbedre systemytelsen ved å identifisere og slette relaterte, men overflødige poster.
author: perlynne
manager: tfehr
ms.date: 04/23/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: SysOperationTemplateForm
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2020-04-03
ms.dyn365.ops.version: Release 10.0.12
ms.openlocfilehash: f045b9686bbdfcf3e82f5158f0fd28860354b7d7
ms.sourcegitcommit: b6686265314499056690538eaa95ca51cff7c720
ms.translationtype: HT
ms.contentlocale: nb-NO
ms.lasthandoff: 01/15/2021
ms.locfileid: "5014489"
---
# <a name="warehouse-management-on-hand-entries-cleanup-job"></a><span data-ttu-id="77620-103">Oppryddingsjobb for lagerstyringsposter</span><span class="sxs-lookup"><span data-stu-id="77620-103">Warehouse management on-hand entries cleanup job</span></span>

<span data-ttu-id="77620-104">Ytelsen til spørringer som brukes til å beregne lagerbeholdning, påvirkes av antall poster i tabellene som er involvert.</span><span class="sxs-lookup"><span data-stu-id="77620-104">The performance of queries that are used to calculate on-hand inventory is affected by the number of records in the tables that are involved.</span></span> <span data-ttu-id="77620-105">Én måte å forbedre ytelsen på, er ved å redusere antall poster databasen må vurdere.</span><span class="sxs-lookup"><span data-stu-id="77620-105">One way to help improve the performance is to reduce the number of records that the database must consider.</span></span>

<span data-ttu-id="77620-106">Dette emnet beskriver oppryddingsjobben for lageroppføringer, som sletter unødvendige poster i InventSum- og WHSInventReserve-tabellene.</span><span class="sxs-lookup"><span data-stu-id="77620-106">This topic describes the on-hand entries cleanup job, which deletes unneeded records in the InventSum and WHSInventReserve tables.</span></span> <span data-ttu-id="77620-107">Disse tabellene lagrer beholdningsinformasjon for varer som er aktivert for prosessering av lagerstyring.</span><span class="sxs-lookup"><span data-stu-id="77620-107">These tables store on-hand information for items that are enabled for warehouse management processing.</span></span> <span data-ttu-id="77620-108">(Disse varene omtales som WHS-varer.) Sletting av disse postene kan forbedre ytelsen for beholdningsberegninger betraktelig.</span><span class="sxs-lookup"><span data-stu-id="77620-108">(These items are referred to as WHS items.) Deletion of these records can significantly improve the performance of on-hand calculations.</span></span>

## <a name="what-the-cleanup-job-does"></a><span data-ttu-id="77620-109">Hva oppryddingsjobben gjør</span><span class="sxs-lookup"><span data-stu-id="77620-109">What the cleanup job does</span></span>

<span data-ttu-id="77620-110">Oppryddingsjobben for lageroppføringer sletter alle poster i WHSInventReserve- og InventSum-tabellene der alle feltverdiene er *0* (null).</span><span class="sxs-lookup"><span data-stu-id="77620-110">The on-hand entries cleanup job deletes any records in the WHSInventReserve and InventSum tables where all the field values are *0* (zero).</span></span> <span data-ttu-id="77620-111">Disse oppføringene kan slettes fordi de ikke bidrar til beholdningsinformasjonen.</span><span class="sxs-lookup"><span data-stu-id="77620-111">These records can be deleted because they don't contribute to the on-hand information.</span></span> <span data-ttu-id="77620-112">Jobben sletter bare oppføringer som er lavere enn **Lokasjon**-nivået.</span><span class="sxs-lookup"><span data-stu-id="77620-112">The job deletes only records that are below the **Location** level.</span></span>

<span data-ttu-id="77620-113">Hvis negativ fysisk beholdning er tillatt, kan det hende at oppryddingsjobben ikke kan slette alle de aktuelle postene.</span><span class="sxs-lookup"><span data-stu-id="77620-113">If negative physical inventory is allowed, the cleanup job might not be able to delete all the relevant entries.</span></span> <span data-ttu-id="77620-114">Årsaken til denne begrensningen er at jobben må tillate et bestemt scenario der et nummerskilt har flere serienumre, hvorav ett av disse serienumrene har blitt negativt.</span><span class="sxs-lookup"><span data-stu-id="77620-114">The reason for this limitation is that the job must allow for a special scenario where a license plate has multiple serial numbers, and one of those serial numbers has become negative.</span></span> <span data-ttu-id="77620-115">Systemet vil for eksempel ikke ha en beholdning på null når et nummerskilt har mer enn 1 stk med serienummer 1 og mindre enn 1 stk av serienummer 2.</span><span class="sxs-lookup"><span data-stu-id="77620-115">For example, the system will have zero on hand at the license plate level when a license plate has +1 pcs of serial number 1 and –1 pcs of serial number 2.</span></span> <span data-ttu-id="77620-116">I dette spesielle scenariet brukes jobben en "breddesletting" der den prøver å slette fra lavere nivåer først.</span><span class="sxs-lookup"><span data-stu-id="77620-116">For this special scenario, the job does a breadth-first deletion, where it tries to delete from lower levels first.</span></span>

## <a name="schedule-and-configure-the-cleanup-job"></a><span data-ttu-id="77620-117">Planlegge og konfigurere oppryddingsjobben</span><span class="sxs-lookup"><span data-stu-id="77620-117">Schedule and configure the cleanup job</span></span>

<span data-ttu-id="77620-118">Oppryddingsjobben for lagerposter er tilgjengelig i **Lagerstyring \> Periodiske oppgaver \> Rydd opp \> Oppryddingsjobb for lagerstyringsposter**.</span><span class="sxs-lookup"><span data-stu-id="77620-118">The on-hand entries cleanup job is available at **Inventory management \> Periodic tasks \> Clean up \> Warehouse management on-hand entries cleanup**.</span></span> <span data-ttu-id="77620-119">Bruk standardinnstillingene for jobben til å styre omfanget av og tidsplanen for kjøring av jobben.</span><span class="sxs-lookup"><span data-stu-id="77620-119">Use the standard job settings to control the scope and schedule for running the job.</span></span> <span data-ttu-id="77620-120">I tillegg finnes følgende innstillinger:</span><span class="sxs-lookup"><span data-stu-id="77620-120">In addition, the following settings are provided:</span></span>

- <span data-ttu-id="77620-121">**Slett hvis ikke oppdatert på dette antallet dager** – Angi det minste antallet dager som jobben skal settes på vent i før den sletter en beholdningsoppføring som har falt til null i antall.</span><span class="sxs-lookup"><span data-stu-id="77620-121">**Delete if not updated for this many days** – Enter the minimum number of days that the job should wait before it deletes an on-hand entry that has dropped to zero quantity.</span></span> <span data-ttu-id="77620-122">Bruk denne innstillingen for å redusere risikoen for å slette lagerbeholdninger som fortsatt brukes.</span><span class="sxs-lookup"><span data-stu-id="77620-122">Use this setting to help reduce the risk of deleting on-hand entries that are still being used.</span></span> <span data-ttu-id="77620-123">Hvis du vil at oppryddingen skal skje så snart som mulig, kan du enten angi *0* (null) eller la feltet stå tomt.</span><span class="sxs-lookup"><span data-stu-id="77620-123">If you want cleanup to occur as soon as possible, either enter *0* (zero) or leave the field blank.</span></span>
- <span data-ttu-id="77620-124">**Maksimal utførelsestid (i timer)** – Angi den maksimale utførelsestiden for oppryddingsjobben, oppført i timer.</span><span class="sxs-lookup"><span data-stu-id="77620-124">**Maximum execution time (hours)** – Enter the maximum execution time of the cleanup job, in hours.</span></span> <span data-ttu-id="77620-125">Hvis jobben ikke blir fullført før denne tiden går ut, vil den lagre arbeidet som er fullført så langt, og deretter lukke seg.</span><span class="sxs-lookup"><span data-stu-id="77620-125">If the job isn't completed before this time passes, it will save the work that it has completed so far and then close itself.</span></span> <span data-ttu-id="77620-126">Denne funksjonen er spesielt relevant for implementeringer som er svært viktige for beholdningen.</span><span class="sxs-lookup"><span data-stu-id="77620-126">This capability is especially relevant for implementations that have high inventory use.</span></span> <span data-ttu-id="77620-127">I disse tilfellene bør du planlegge at jobben skal kjøres når systembelastningen er så lav som mulig.</span><span class="sxs-lookup"><span data-stu-id="77620-127">In these cases, you should schedule the job to run at times when the system load is as light as possible.</span></span> <span data-ttu-id="77620-128">Hvis du vil at den partivise jobben fortsatt skal kjøres til den er fullført, angir du *0* (null) eller lar feltet stå tomt.</span><span class="sxs-lookup"><span data-stu-id="77620-128">If you want the batch job to continue to run until it's completed, either enter *0* (zero) or leave the field blank.</span></span> <span data-ttu-id="77620-129">Denne innstillingen er bare tilgjengelig hvis den tilknyttede funksjonen er [aktivert i systemet](#max-execution-time).</span><span class="sxs-lookup"><span data-stu-id="77620-129">This setting is available only if the related feature has been [turned on in your system](#max-execution-time).</span></span>

<span data-ttu-id="77620-130">Selv om du kan kjøre jobben innenfor vanlig arbeidstid, anbefaler vi at du kjører den utenfor arbeidstiden.</span><span class="sxs-lookup"><span data-stu-id="77620-130">Although you can run the job during regular business hours, we recommend that you run it outside working hours.</span></span> <span data-ttu-id="77620-131">På denne måten bidrar du til å forhindre konflikter som kan oppstå hvis en bruker jobber med en post som samtidig ryddes opp.</span><span class="sxs-lookup"><span data-stu-id="77620-131">In this way, you help prevent conflicts that can occur if a user is working with a record that is also being cleaned up.</span></span>

<span data-ttu-id="77620-132">Hvis jobben prøver å slette en post for en vare mens denne posten brukes av en annen bruker, oppstår det en vranglås-feil enten for oppryddingsjobben eller brukeren.</span><span class="sxs-lookup"><span data-stu-id="77620-132">If the job tries to delete a record for an item while that record is being used by another user, a deadlock error occurs for either the cleanup job or the user.</span></span>

<span data-ttu-id="77620-133">Når jobben kjører, har den en tildelt størrelse på 100.</span><span class="sxs-lookup"><span data-stu-id="77620-133">When the job runs, it has a commit size of 100.</span></span> <span data-ttu-id="77620-134">Den vil med andre ord prøve å utføres én gang for hver 100. sletting.</span><span class="sxs-lookup"><span data-stu-id="77620-134">In other words, it will try to commit one time for every 100 deletions.</span></span> <span data-ttu-id="77620-135">Fordi enkelte slettinger er settbasert, kan det oppstå scenarier der mer enn 100 poster kan bli slettet i den samme transaksjonen.</span><span class="sxs-lookup"><span data-stu-id="77620-135">However, because some deletions are set-based, there might be scenarios where more than 100 records can be deleted in the same transaction.</span></span> <span data-ttu-id="77620-136">Derfor kan det hende at låseeskalering fremdeles forekommer.</span><span class="sxs-lookup"><span data-stu-id="77620-136">Therefore, lock escalations can still sometimes occur.</span></span>

## <a name="possible-user-impact"></a><span data-ttu-id="77620-137">Mulig påvirkning på brukerne</span><span class="sxs-lookup"><span data-stu-id="77620-137">Possible user impact</span></span>

<span data-ttu-id="77620-138">Brukere kan bli påvirket hvis oppryddingsjobben for lagerbeholdning sletter alle postene for et gitt nivå (f.eks. nummerskiltnivået).</span><span class="sxs-lookup"><span data-stu-id="77620-138">Users might be affected if the on-hand entries cleanup job deletes all the records for a given level (such as the license plate level).</span></span> <span data-ttu-id="77620-139">I dette tilfellet er det ikke sikkert at funksjonaliteten for å vise den tidligere tilgjengelige beholdningen ved et nummerskilt fungerer som forventet, fordi de relevante beholdningspostene ikke lenger er tilgjengelige.</span><span class="sxs-lookup"><span data-stu-id="77620-139">In this case, the functionality for seeing that inventory was previously available on-hand at a license plate might not work as expected because the relevant on-hand entries are no longer available.</span></span> <span data-ttu-id="77620-140">Dette kan for eksempel skje i følgende situasjoner:</span><span class="sxs-lookup"><span data-stu-id="77620-140">This can, for example, be experienced in the following situations:</span></span>

- <span data-ttu-id="77620-141">I **Beholdningsliste** når brukeren opphever valget av betingelsen **Antall \<\> 0** eller velger betingelsen **Lukkede transaksjoner** i innstillingene for **Dimensjonsvisning**.</span><span class="sxs-lookup"><span data-stu-id="77620-141">On the **On-hand list**, when the user deselects the condition **Quantity \<\> 0** or selects the condition **Closed transactions** in the **Dimensions display** settings.</span></span>
- <span data-ttu-id="77620-142">I rapporten **Aktuell beholdning etter lagerdimensjon** for tidligere perioder når brukeren angir parameteren **Per dato**.</span><span class="sxs-lookup"><span data-stu-id="77620-142">In a **Physical inventory by inventory dimension** report for past periods, when the user sets the **As of date** parameter.</span></span>

<span data-ttu-id="77620-143">Ytelsesforbedringen som oppryddingsjobben gir, skal imidlertid veie opp for disse små tapene i funksjonalitet.</span><span class="sxs-lookup"><span data-stu-id="77620-143">However, the performance improvement that the cleanup job provides should make up for these small losses in functionality.</span></span>

## <a name="make-the-maximum-execution-time-setting-available"></a><a name="max-execution-time"></a><span data-ttu-id="77620-144">Gjør innstillingen for maksimal utførelsestid tilgjengelig.</span><span class="sxs-lookup"><span data-stu-id="77620-144">Make the Maximum execution time setting available</span></span>

<span data-ttu-id="77620-145">Som standard er innstillingen **Maksimal utførelsestid** ikke tilgjengelig.</span><span class="sxs-lookup"><span data-stu-id="77620-145">By default, the **Maximum execution time** setting isn't available.</span></span> <span data-ttu-id="77620-146">Hvis du vil bruke den, må du bruke [funksjonsbehandling](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) for å aktivere den tilknyttede funksjonen i systemet.</span><span class="sxs-lookup"><span data-stu-id="77620-146">If you want to use it, you must use [feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) to turn on the related feature in your system.</span></span> <span data-ttu-id="77620-147">I **Funksjonsadministrering**-arbeidsområdet er denne funksjonen oppført på følgende måte:</span><span class="sxs-lookup"><span data-stu-id="77620-147">In the **Feature management** workspace, the feature is listed in the following way:</span></span>

- <span data-ttu-id="77620-148">**Modul:** *Lagerstyring*</span><span class="sxs-lookup"><span data-stu-id="77620-148">**Module:** *Warehouse management*</span></span>
- <span data-ttu-id="77620-149">**Funksjonsnavn:** *Maksimal utførelsestid for oppryddingsjobb for lagerbeholdning*</span><span class="sxs-lookup"><span data-stu-id="77620-149">**Feature name:** *Maximum execution time for the warehouse management on-hand entries cleanup job*</span></span>
